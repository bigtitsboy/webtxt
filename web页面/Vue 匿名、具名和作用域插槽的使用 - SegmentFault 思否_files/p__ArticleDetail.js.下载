(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41,5,7],{"212T":function(e,t,a){},"2CDT":function(e,t,a){"use strict";function n(e){var t,a,n,i,c,r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e?window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(l,"&v=5f0a9217&tag=").concat(e)):null!==(t=window.location)&&void 0!==t&&null!==(a=t.pathname)&&void 0!==a&&a.includes("/a/")||null!==(n=window.location)&&void 0!==n&&null!==(i=n.pathname)&&void 0!==i&&i.includes("/q/")||null!==(c=window.location)&&void 0!==c&&null!==(r=c.pathname)&&void 0!==r&&r.includes("/t/")||window.OA_script("https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=".concat(l,"&v=5f0a9217"))}t["a"]=n},"47/0":function(e,t,a){},"4GjR":function(e,t,a){"use strict";var n=a("k1fw"),i=a("9og8"),c=a("tJVT"),r=a("WmNS"),l=a.n(r),o=a("q1tI"),s=a.n(o),d=a("97+O"),m=a("9kvl"),u=a("YdHu"),v=a("tSvB"),f=a("Dp36"),b=function(e){var t,a=e.id,r=e.type,m=e.actions,b=void 0===m?[]:m,p=e.member_actions,g=void 0===p?[]:p,E=e.onCallBack,h=e.sessionUser,y=e.className,O=e.qid,j=e.questionDetail,w=e.tagName,k={question:"/q/".concat(a,"/revision"),answer:"/q/".concat(O,"/a-").concat(a,"/revision"),tag:"/t/".concat(w,"/revision"),article:"/a/".concat(a,"/revision")},N=Object(o["useState"])({visable:!1,action:"",actionName:""}),x=Object(c["a"])(N,2),_=x[0],S=x[1],I="question"===r&&j[a]||{},C=I.site,A=void 0===C?{}:C,D=I.question;D=void 0===D?{}:D;var R=D.is_site,T=void 0===R?1:R,L=Object(o["useState"])(!1),B=Object(c["a"])(L,2),q=B[0],F=B[1],M=Object(o["useState"])(!1),H=Object(c["a"])(M,2),U=H[0],z=H[1],V=Object(o["useState"])(!1),P=Object(c["a"])(V,2),J=P[0],Y=P[1],K=function(e){Object(f["Mc"])({id:a,type:r,handle:e}).then((function(e){E(e)}))},W=function(){var e=Object(i["a"])(l.a.mark((function e(t){var i,c;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("report"!==_.action){e.next=6;break}return e.next=3,Object(f["zd"])(Object(n["a"])({object_id:a},t))["catch"]((function(e){i=null===e||void 0===e?void 0:e.object_id}));case 3:return c=e.sent,E(c||i,_.action),e.abrupt("return");case 6:if("seo"!==_.action&&"hide-setting"!==_.action){e.next=9;break}return E("",_.action),e.abrupt("return");case 9:if("delete"!==_.action){e.next=12;break}return Object(f["Nc"])(Object(n["a"])({id:a,type:r},t)).then((function(e){E(e,_.action)})),e.abrupt("return");case 12:Object(f["Mc"])(Object(n["a"])({id:a,type:r,handle:_.action},t)).then((function(e){E(e,_.action)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:y},(g.length>0||b.length>0)&&s.a.createElement(s.a.Fragment,null,g.filter((function(e){return"edit"===e.type})).map((function(e){var t;switch(r){case"article":t="/a/".concat(a,"/edit");break;case"question":t="/q/".concat(a,"/edit");break;case"answer":t="/q/".concat(O,"/a-").concat(a,"/edit");break;case"product":t="/product/".concat(a,"/edit");break;case"product-score":t="/product/".concat(O,"/r-").concat(a,"/edit");break;case"tag":t="/t/".concat(w,"/edit");break;case"event":t="/events/".concat(a,"/edit");break}return s.a.createElement("a",{key:e.name,className:"text-secondary ".concat(r,"-edit"),href:t},s.a.createElement("span",null,"\u7f16\u8f91"))})),((null===g||void 0===g||null===(t=g.filter((function(e){return"edit"!==e.type})))||void 0===t?void 0:t.length)>0||(null===b||void 0===b?void 0:b.length)>0||k[r])&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("div",{className:"d-inline-block"},s.a.createElement(d["a"],null,s.a.createElement(d["a"].Toggle,{as:u["a"],className:"text-secondary",id:"operate-manage-toggle"},s.a.createElement("span",null,"\u64cd\u4f5c")),s.a.createElement(d["a"].Menu,null,g.filter((function(e){return"edit"!==e.type})).map((function(e,t){return"reason"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){S({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){return K(e.action)}},e.name):void 0})),k[r]&&s.a.createElement(d["a"].Item,{href:k[r]},"\u5386\u53f2\u7248\u672c"),b.length>0&&g.filter((function(e){return"edit"!==e.type})).length>0&&s.a.createElement(d["a"].Divider,null),b.map((function(e,t){if("edit"===e.type){var i;switch(r){case"article":i="/a/".concat(a,"/edit");break;case"question":i="/q/".concat(a,"/edit");break;case"answer":i="/q/".concat(O,"/a-").concat(a,"/edit");break;case"product":i="/product/".concat(a,"/edit");break;case"product-score":i="/product/".concat(O,"/r-").concat(a,"/edit");break}return s.a.createElement(d["a"].Item,{key:e.name+t,href:i},e.name)}return"reason"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){S({action:e.action,visable:!0,actionName:e.name})}},e.name):"put"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){return K(e.action)}},e.name):"site"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){F(!0),S(Object(n["a"])(Object(n["a"])({},_),{},{action:e.action}))}},e.name):"seo"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){z(!0),S(Object(n["a"])(Object(n["a"])({},_),{},{action:e.action}))}},e.name):"hide"===e.type?s.a.createElement(d["a"].Item,{key:e.name+t,onClick:function(){Y(!0),S(Object(n["a"])(Object(n["a"])({},_),{},{action:e.action}))}},e.name):s.a.createElement(d["a"].Item,{key:e.name+t},e.name)}))))))),(g.length>0||(null===b||void 0===b?void 0:b.length)>0)&&s.a.createElement("span",{className:"split-dot"}),h&&s.a.createElement("a",{className:"text-secondary",href:"###",onClick:function(e){e.preventDefault(),S({action:"report",visable:!0,actionName:"\u4e3e\u62a5"})}},s.a.createElement("span",null,"\u4e3e\u62a5")),_.visable&&s.a.createElement(v["j"],{id:a,isShow:!0,action:_.action,actionName:_.actionName,setModalStatus:S,onOk:W}),q&&s.a.createElement(v["i"],{isShow:!0,setModalStatus:F,callback:W,siteId:null===A||void 0===A?void 0:A.id,isSite:T}),s.a.createElement(v["u"],{id:a,isShow:U,setModalStatus:z,callBack:W}),s.a.createElement(v["k"],{id:a,isShow:J,setModalStatus:Y,callBack:W}))};t["a"]=Object(m["b"])((function(e){var t=e.global,a=e.question;return{sessionUser:t.sessionUser,questionDetail:a.questionDetail}}))(s.a.memo(b))},"5SRE":function(e,t,a){},"5ui+":function(e,t,a){"use strict";var n=a("k1fw"),i=a("tJVT"),c=a("q1tI"),r=a.n(c),l=a("6xyR"),o=a("HToz"),s=a.n(o),d=a("rlch"),m=a("9kvl"),u=a("Wgwc"),v=a.n(u),f=a("LvDl"),b=a("dDCJ"),p=a("AINe"),g=(a("pHGr"),a("QgiU")),E=a.n(g),h=a("Dp36"),y=a("0lfv");v.a.locale("zh-cn"),v.a.extend(E.a);var O=function(e){var t,a,n,i,c,l,o,s=e.title,d=e.user,m=e.id,u=e.created,f=e.modified,g=e.initPage,E=e.actions,O=e.member_actions,j=e.lang,w=e.langs,k=function(){null!==E&&void 0!==E&&E.find((function(e){return"recommend"===e.action}))?Object(h["p"])(m).then((function(){Object(y["n"])("\u63a8\u8350\u5df2\u63d0\u4ea4\uff0c\u7b49\u5f85\u5ba1\u6838"),g()})):Object(h["l"])(m).then((function(){g()}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"h2 mb-3"},r.a.createElement("a",{href:"/a/".concat(m),className:"text-body"},s)),r.a.createElement("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-4"},r.a.createElement("div",{className:"d-flex align-items-center flex-wrap"},r.a.createElement("a",{href:null===d||void 0===d?void 0:d.url,className:"d-flex align-items-center"},r.a.createElement("picture",{className:"me-2"},r.a.createElement("img",{src:(null===d||void 0===d?void 0:d.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"",className:"d-inline-block rounded-circle",width:"32",height:"32"})),r.a.createElement("strong",{className:"align-self-center font-size-14"},null===d||void 0===d?void 0:d.name)),null!==d&&void 0!==d&&null!==(t=d.user_auth)&&void 0!==t&&t.is_auth?r.a.createElement("ul",{className:"list-inline mb-0 authentication-info sflex-center font-size-14 ms-1"},r.a.createElement("li",{className:"list-inline-item",style:{color:"#BF7158"}},r.a.createElement(b["a"],{placement:"top",overlay:r.a.createElement(p["a"],{id:"top"},r.a.createElement("span",{className:""},null===d||void 0===d||null===(a=d.user_auth)||void 0===a?void 0:a.info))},r.a.createElement("i",{className:"fas fa-badge-check text-warning"})))):null,u!==f&&f>u?r.a.createElement(b["a"],{placement:"top",overlay:r.a.createElement(p["a"],{id:"top"},r.a.createElement("span",{className:""},"\u66f4\u65b0\u4e8e ",Object(y["d"])(f)))},r.a.createElement("time",{className:"text-secondary font-size-14",dateTime:v.a.unix(u).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(y["d"])(u))):r.a.createElement("time",{className:"text-secondary font-size-14",dateTime:v.a.unix(u).toISOString(),itemProp:"datePublished",style:{marginLeft:"12px"}},"\u53d1\u5e03\u4e8e ",Object(y["d"])(u)),null!==O&&void 0!==O&&null!==(n=O.find((function(e){return"edit"===e.action})))&&void 0!==n&&n.name?r.a.createElement("a",{href:"/a/".concat(m,"/edit"),className:"font-size-14",style:{marginLeft:"12px"}},"\u7f16\u8f91"):null,null!==E&&void 0!==E&&null!==(i=E.find((function(e){return"recommend"===e.action})))&&void 0!==i&&i.name||null!==E&&void 0!==E&&null!==(c=E.find((function(e){return"cancel-recommend"===e.action})))&&void 0!==c&&c.name?r.a.createElement("a",{href:"###",className:"font-size-14",onClick:function(e){e.preventDefault(),k()},style:{marginLeft:"12px"}},(null===E||void 0===E||null===(l=E.find((function(e){return"recommend"===e.action})))||void 0===l?void 0:l.name)||(null===E||void 0===E||null===(o=E.find((function(e){return"cancel-recommend"===e.action})))||void 0===o?void 0:o.name)):null),(null===w||void 0===w?void 0:w.length)>0&&r.a.createElement("a",{href:"en"===j?"/a/".concat(m):"/a/".concat(m,"/en"),className:"d-flex align-items-center"},r.a.createElement("div",{style:{height:"21px",lineHeight:"21px"}},r.a.createElement("i",{className:"far fa-language"})),r.a.createElement("span",{className:"font-size-14 ms-1"},"en"===j?"\u4e2d\u6587":"English"))))},j=O,w=a("tSvB"),k=a("4GjR"),N=(a("5SRE"),function(e){var t=e.realRed,a=void 0===t?0:t,n=e.read,i=void 0===n?0:n,c=e.created,l=void 0===c?0:c,o=e.modified,s=void 0===o?0:o,d=e.id,m=e.actions,u=void 0===m?[]:m,f=e.initPage,g=e.isEditor,E=e.memberActions,h=function(){y["n"].hide()},O=function(e,t){switch(t){case"report":w["w"].confirm({content:"string"===typeof e?e:"\u4e3e\u62a5\u6210\u529f"});break;case"hide-setting":case"delete":Object(y["n"])("string"===typeof e?e:""),null===f||void 0===f||f();break;case"reject":h(),null===f||void 0===f||f();break;default:"string"===typeof e&&Object(y["n"])("string"===typeof e?e:""),null===f||void 0===f||f();break}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-secondary font-size-14 mt-3 mb-5 d-flex flex-wrap justify-content-between"},r.a.createElement("div",null,r.a.createElement("span",null,"\u9605\u8bfb ",Object(y["l"])(i),g&&a>0&&"\uff08UV ".concat(Object(y["l"])(a),"\uff09")),r.a.createElement("span",{className:"split-dot"}),l!==s&&s>l?r.a.createElement(b["a"],{placement:"top",overlay:r.a.createElement(p["a"],{id:"tip-top"},"\u53d1\u5e03\u4e8e ",r.a.createElement("span",null,Object(y["d"])(l)))},r.a.createElement("time",{dateTime:v.a.unix(l).toISOString(),itemProp:"datePublished"},"\u66f4\u65b0\u4e8e ",Object(y["d"])(s))):r.a.createElement("time",{dateTime:v.a.unix(l).toISOString(),itemProp:"datePublished"},"\u53d1\u5e03\u4e8e ",Object(y["d"])(l))),r.a.createElement("div",{className:"operation text-end"},r.a.createElement(k["a"],{id:d,actions:u,type:"article",onCallBack:O,member_actions:E}))))}),x=r.a.memo(N),_=function(e){var t=e.type,a=e.licence;return r.a.createElement("div",{className:"font-size-14 text-secondary text-center mt-3 mb-5"},(0===t||1===t)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"\u672c\u4f5c\u54c1\u7cfb\u539f\u521b\uff0c"),"sa"===a?r.a.createElement("a",{target:"_blank",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae"):"nd"===a?r.a.createElement("a",{target:"_blank",className:"text-secondary",href:"https://segmentfault.com/tos#sec-licence-4"},"\u4f5c\u8005\u4fdd\u7559\u6240\u6709\u6743\u5229\uff0c\u672a\u7ecf\u4f5c\u8005\u5141\u8bb8\uff0c\u7981\u6b62\u8f6c\u8f7d\u548c\u6f14\u7ece"):r.a.createElement("a",{target:"_blank",className:"text-secondary",href:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},"\u91c7\u7528\u300a\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u7981\u6b62\u6f14\u7ece 4.0 \u56fd\u9645\u300b\u8bb8\u53ef\u534f\u8bae")))},S=r.a.memo(_),I=a("heTN"),C=a("9og8"),A=a("WmNS"),D=a.n(A),R=a("3Z9Z"),T=a("JI6e"),L=a("EVdn"),B=a("wwbV"),q=a("6Yt9"),F=function(e){var t=e.blog,a=Object(c["useState"])((null===t||void 0===t?void 0:t.is_followed)||0),n=Object(i["a"])(a,2),l=n[0],o=n[1],s=function(){var e=Object(C["a"])(D.a.mark((function e(){return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(q["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(h["rb"])({id:t.id,type:"blog",isFollow:l?0:1});case 4:return o(!l),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c["useEffect"])((function(){L(document.body).width()<576&&L("#followUser button").addClass("col-12"),L(window).resize((function(){L(document.body).width()<576?L("#followUser button").addClass("col-12"):L("#followUser button").removeClass("col-12")}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",{className:"mb-0"}),r.a.createElement(R["a"],{className:"pt-4 align-items-center"},r.a.createElement(T["a"],{className:"d-flex align-items-center col-12 col-md w-0"},r.a.createElement("a",{href:null===t||void 0===t?void 0:t.url},r.a.createElement("img",{className:"me-3 rounded",width:"64",height:"64",src:(null===t||void 0===t?void 0:t.thumbnail_url)||"https://image-static.segmentfault.com/383/303/3833030929-5ffd15fc110ab","aria-hidden":"true"})),r.a.createElement("div",{className:"w-100"},r.a.createElement("a",{href:null===t||void 0===t?void 0:t.url,className:"text-body"},r.a.createElement("h5",{className:"mb-0"},null===t||void 0===t?void 0:t.name)),(null===t||void 0===t?void 0:t.excerpt)&&r.a.createElement("div",{className:"text-truncate-1 text-secondary mt-2"},null===t||void 0===t?void 0:t.excerpt))),r.a.createElement(T["a"],{className:"col-md-90 col-12 mt-md-0 mt-3",id:"followUser"},r.a.createElement("div",{className:"d-grid"},r.a.createElement(B["a"],{onClick:s},l?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4e13\u680f")))))},M=r.a.memo(F),H=a("kwfb"),U=a("kUPb"),z=a("TUci"),V=a("cWnB"),P=function(e){var t=e.visible,a=e.payUrl;return t?r.a.createElement(z["a"],{variant:"warning",className:"mb-4"},r.a.createElement("p",null,"\u8fd8\u5dee\u4e00\u6b65\uff0c\u652f\u4ed8\u540e\u5373\u53ef\u516c\u5f00\u5c55\u793a\u3002"),r.a.createElement("div",null,r.a.createElement(V["a"],{variant:"danger",href:a},"\u652f\u4ed8 \uffe5100"))):null},J=r.a.memo(P),Y=function(e){var t=e.originUrl,a=void 0===t?"":t,n=e.type;return r.a.createElement("div",{className:"bg-light my-4 p-3"},r.a.createElement("a",{className:"d-flex align-items-center text-body",href:a,target:"_blank",rel:"nofollow"},r.a.createElement("div",{className:"d-flex align-items-center bg-secondary justify-content-center me-3 rounded px-3",style:{width:"48px",height:"48px"}},r.a.createElement("i",{className:"far fa-file-lines fa-lg text-white"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"text-body mb-0 fw-bold"},r.a.createElement("span",{style:{color:"#000"}},"\u672c\u6587\u7cfb",2===n?"\u8f6c\u8f7d":"\u7ffb\u8bd1","\uff0c\u9605\u8bfb\u539f\u6587")),r.a.createElement("div",{className:"font-size-13 text-secondary text-truncate-1 w-75"},r.a.createElement("small",{style:{wordBreak:"break-word"}},a)))))},K=r.a.memo(Y),W=a("Inh2"),$=function(e){var t,o,u,b=e.detail,p=e.actionData,g=e.actions,E=e.initPage,y=e.imageUrl,O=e.isEditor,w=e.isAuthor,k=e.memberActions,N=e.articleHtml,_=e.lang,C=e.payInfo,A=e.isBaiduOxApp,D=void 0!==A&&A,R=e.visibleActions,T=void 0===R||R,L=Object(c["useState"])(Object(d["d"])()?"":"https://cdn.segmentfault.com/r-af14d408/"),B=Object(i["a"])(L,2),q=B[0],F=B[1],z=b.article,V=b.blog,P=b.description,Y=Object(c["useState"])(!1),$=Object(i["a"])(Y,2),G=$[0],Z=$[1],Q=Object(c["useState"])(Object(d["d"])()?(null===(t=document.querySelector(".article.fmt"))||void 0===t?void 0:t.innerHTML)||(null===z||void 0===z?void 0:z.parsed_text):N),X=Object(i["a"])(Q,2),ee=X[0],te=X[1],ae=Object(c["useRef"])(),ne=Object(m["f"])();Object(d["d"])()&&!G&&(window.articleHtml=(null===(u=document.querySelector(".article.fmt"))||void 0===u?void 0:u.innerHTML)||"");return Object(c["useEffect"])((function(){if(ee){if(ae.current instanceof HTMLElement)for(var e=null===ae||void 0===ae?void 0:ae.current.getElementsByTagName("a"),t=e.length,a=0;a<t;a++)e[a].target="_blank"}else{var n=Object(W["a"])();n.errorEvent({eventName:"articleContent"}),Object(h["m"])({aid:z.id,pure:1}).then((function(e){ne({type:"articleDetail/saveArticleHtml",payload:{id:z.id,parsed_text:null===e||void 0===e?void 0:e.parsed_text}}),te(null===e||void 0===e?void 0:e.parsed_text)}))}}),[ee]),Object(c["useEffect"])((function(){if(!Object(f["isEmpty"])(b)){var e=new s.a;e.update()}})),Object(c["useEffect"])((function(){Z(!0),F(window.publicPath||""),ne({type:"articleDetail/saveArticleHtml",payload:{id:z.id,parsed_text:window.articleHtml}})}),[]),Object(c["useEffect"])((function(){null!==z&&void 0!==z&&z.parsed_text&&te(z.parsed_text)}),[null===z||void 0===z?void 0:z.parsed_text]),Object(c["useEffect"])((function(){if(!Object(f["isEmpty"])(b)){var e=new s.a;e.update()}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(m["a"],null,r.a.createElement("meta",{name:"twitter:card",content:y?"summary_large_image":"summary"}),r.a.createElement("meta",{name:"twitter:image",content:y?"https://segmentfault.com".concat(y):"".concat(q,"touch-icon.png")}),r.a.createElement("meta",{name:"twitter:site",content:"@segment_fault"}),r.a.createElement("meta",{name:"twitter:creator",content:"@segmentfault"}),r.a.createElement("meta",{name:"twitter:title",content:null===z||void 0===z?void 0:z.title}),r.a.createElement("meta",{name:"og:type",content:"article"}),r.a.createElement("meta",{name:"og:image",content:y?"https://segmentfault.com".concat(y):"".concat(q,"touch-icon.png")}),r.a.createElement("meta",{name:"og:title",content:null===z||void 0===z?void 0:z.title}),r.a.createElement("meta",{name:"og:description",content:P}),r.a.createElement("meta",{name:"og:url",content:"https://segmentfault.com/a/".concat(null===z||void 0===z?void 0:z.id)}),r.a.createElement("meta",{name:"og:site_name",content:"SegmentFault \u601d\u5426"}),r.a.createElement("meta",{name:"msvalidate.01",content:"2C018C53297C8388F3E7052F5E9CA6AF"}),r.a.createElement("meta",{name:"event-object",value:'{"current": ["article", ["'.concat(null===z||void 0===z?void 0:z.id,'"]], "root": ["article", "').concat(null===z||void 0===z?void 0:z.id,'"]}'),id:"SFEventObject"}),r.a.createElement("script",{type:"application/ld+json"},'{\n            "@context": "https://schema.org",\n            "@type": "Article",\n            "mainEntityOfPage": {\n              "@type": "WebPage",\n              "@id": "https://google.com/article"\n            },\n            "name": '.concat(JSON.stringify((null===z||void 0===z?void 0:z.title)||""),',\n            "headline": ').concat(JSON.stringify((null===z||void 0===z?void 0:z.title)||""),',\n            "image": "').concat(null!==z&&void 0!==z&&z.cover?null===z||void 0===z?void 0:z.cover:y||"".concat(q,"touch-icon.png"),'",\n            "datePublished": "').concat(v.a.unix(null===z||void 0===z?void 0:z.created).toISOString(),'",\n            "dateModified": "').concat(v.a.unix((null===z||void 0===z?void 0:z.created)>(null===z||void 0===z?void 0:z.modified)?null===z||void 0===z?void 0:z.created:null===z||void 0===z?void 0:z.modified).toISOString(),'",\n            "url": "https://segmentfault.com/a/').concat(null===z||void 0===z?void 0:z.id,'",\n            "author": {\n              "@type": "Person",\n              "name": ').concat(JSON.stringify(null===z||void 0===z||null===(o=z.user)||void 0===o?void 0:o.name),'\n            },\n            "publisher": {\n              "@type": "Organization",\n              "name": "SegmentFault",\n              "logo": {\n                "@type": "ImageObject",\n                "url":\n                  "https://assets.segmentfault.com/v-5fc4b0b2/global/img/static/touch-icon.png"\n              }\n            }\n          }'))),r.a.createElement(l["a"],{className:"mb-4"},(null===z||void 0===z?void 0:z.cover)&&r.a.createElement(l["a"].Img,{variant:"top",src:a("xQMv"),className:"w-100 rounded-top",style:{background:"no-repeat center url(".concat(z.cover,")"),backgroundSize:"cover"},alt:"\u5934\u56fe"}),r.a.createElement(l["a"].Body,{className:"p-lg-30 position-relative"},r.a.createElement(j,{title:null===z||void 0===z?void 0:z.title,user:null===z||void 0===z?void 0:z.user,id:null===z||void 0===z?void 0:z.id,created:null===z||void 0===z?void 0:z.created,modified:null===z||void 0===z?void 0:z.modified,initPage:E,actions:g,member_actions:k,langs:null===z||void 0===z?void 0:z.langs,lang:_}),r.a.createElement(H["a"],{name:"25"}),r.a.createElement(J,{visible:w&&!1===(null===C||void 0===C?void 0:C.paid),payUrl:null===C||void 0===C?void 0:C.pay_url,id:null===z||void 0===z?void 0:z.id}),r.a.createElement("article",{className:"article fmt article-content ",dangerouslySetInnerHTML:{__html:ee},ref:ae}),!D&&r.a.createElement(I["a"],{tags:null===z||void 0===z?void 0:z.tags}),(null===z||void 0===z?void 0:z.article_type)>1&&r.a.createElement(K,{originUrl:null===z||void 0===z?void 0:z.origin_url,type:null===z||void 0===z?void 0:z.article_type}),r.a.createElement("div",{className:"my-4"},r.a.createElement(H["a"],{name:"3"})),r.a.createElement(x,{realRed:null===z||void 0===z?void 0:z.real_unique_views,read:null===z||void 0===z?void 0:z.real_views,created:null===z||void 0===z?void 0:z.created,modified:null===z||void 0===z?void 0:z.modified,id:null===z||void 0===z?void 0:z.id,actions:g,initPage:E,isEditor:O,memberActions:k}),T&&r.a.createElement(U["a"],{id:null===z||void 0===z?void 0:z.id,title:null===z||void 0===z?void 0:z.title,actionData:Object(n["a"])({},p),banner:null===z||void 0===z?void 0:z.cover,isAuthor:w,mode:"btnGroup",source:"article"}),r.a.createElement(S,{type:null===z||void 0===z?void 0:z.article_type,licence:null===V||void 0===V?void 0:V.licence}),(null===V||void 0===V?void 0:V.id)&&!D&&r.a.createElement(M,{blog:V}))))};t["a"]=r.a.memo($)},"6T2I":function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("XWsC"),r=a("9kvl"),l=function(e){var t=e.data,a=e.className,n=void 0===a?"":a,r=e.isBaiduOxApp,l=void 0!==r&&r;return l?null:i.a.createElement(c["a"],{className:"font-size-14 px-0 my-0 position-relative ".concat(n),bsPrefix:"breadcrumb bg-transparent",style:{zIndex:1}},i.a.createElement(c["a"].Item,{href:"/"},"\u9996\u9875"),t.map((function(e,a){return e.name?i.a.createElement(c["a"].Item,{href:e.url,key:e.url,active:t.length===a+1},e.name):null})))};t["a"]=Object(r["b"])((function(e){var t=e.global;return{isBaiduOxApp:t.isBaiduOxApp}}))(l)},"9F+u":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n,i,c=a("EVdn");function r(e){function t(){c("body").find(".ad-container").each((function(e,t){var a,n;(!c(t).hasClass(".ad-close")||null!==(a=c(t))&&void 0!==a&&null!==(n=a.children())&&void 0!==n&&n.length)&&c(t).show()})),e&&c(".ad-close").parent().each((function(t,a){var n=c(a).attr("id"),i="".concat(e,"-").concat(n),r=parseInt(localStorage.getItem(i)||"0")||0;"OA_holder_5"===n&&(r=Math.max(parseInt(localStorage.getItem("article-OA_holder_5")||"0"),parseInt(localStorage.getItem("question-OA_holder_5")||"0"),parseInt(localStorage.getItem("global-OA_holder_5")||"0"))),r<Date.now()?c("#"+n).css("display","block"):c("#"+n).remove()})),c(".ad-close").css({position:"relative"}).append(c('<div class="sflex-center ad-close-div"></div>').css({width:"16px",height:"16px",position:"absolute",right:"8px",top:"8px","background-color":"rgba(0,0,0,.75)",cursor:"pointer","pointer-events":"none","border-radius":"50%"}).append(c('<span class="ad-close-span"></span>').css({width:"8px",height:"8px",display:"block","background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath fill='%23FFF' fill-rule='evenodd' d='M6.6667 0L8 1.3333 5.333 4 8 6.6667 6.6667 8 4 5.333 1.3333 8 0 6.6667 2.666 4 0 1.3333 1.3333 0 4 2.667 6.6667 0z'/%3E%3C/svg%3E\")","background-repeat":"no-repeat","background-position":"center","pointer-events":"auto"}))),c(".ad-close-span").on("click",(function(){var t=c(this).parents(".ad-close").parent(),a=t.attr("id");t.parent().remove(),localStorage.setItem("".concat(e,"-").concat(a),(Date.now()+864e5).toString())}))}n&&clearInterval(n),n=setInterval((function(){c(".ad-close").length>0&&(clearInterval(n),t())}),300),i&&clearInterval(i),i=setInterval((function(){c("div[id^='OA_holder_']").length>0&&(clearInterval(i),c("div[id^='OA_holder_']").each((function(e,t){var a=c(t).children("div[id^='beacon_']").length;a>0&&c(t).parent().show()})))}),500)}},"9cdK":function(e,t,a){},AINe:function(e,t,a){"use strict";var n=a("TSYQ"),i=a.n(n),c=a("q1tI"),r=a("vUet"),l=a("qIv2"),o=a("nKUr");const s={placement:"right"},d=c["forwardRef"]((({bsPrefix:e,placement:t,className:a,style:n,children:c,arrowProps:s,popper:d,show:m,...u},v)=>{e=Object(r["a"])(e,"tooltip");const f=Object(r["b"])(),[b]=(null==t?void 0:t.split("-"))||[],p=Object(l["a"])(b,f);return Object(o["jsxs"])("div",{ref:v,style:n,role:"tooltip","x-placement":b,className:i()(a,e,`bs-tooltip-${p}`),...u,children:[Object(o["jsx"])("div",{className:"tooltip-arrow",...s}),Object(o["jsx"])("div",{className:`${e}-inner`,children:c})]})}));d.defaultProps=s,d.displayName="Tooltip",t["a"]=d},HToz:function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){"use strict";function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},e.apply(this,arguments)}var t="undefined"!=typeof window,a=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window,i=t&&"classList"in document.createElement("p"),c=t&&window.devicePixelRatio>1,r={elements_selector:".lazy",container:a||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},l=function(t){return e({},r,t)},o=function(e,t){var a,n="LazyLoad::Initialized",i=new e(t);try{a=new CustomEvent(n,{detail:{instance:i}})}catch(e){(a=document.createEvent("CustomEvent")).initCustomEvent(n,!1,!1,{instance:i})}window.dispatchEvent(a)},s="src",d="srcset",m="sizes",u="poster",v="llOriginalAttrs",f="loading",b="loaded",p="applied",g="error",E="native",h="data-",y="ll-status",O=function(e,t){return e.getAttribute(h+t)},j=function(e){return O(e,y)},w=function(e,t){return function(e,t,a){var n="data-ll-status";null!==a?e.setAttribute(n,a):e.removeAttribute(n)}(e,0,t)},k=function(e){return w(e,null)},N=function(e){return null===j(e)},x=function(e){return j(e)===E},_=[f,b,p,g],S=function(e,t,a,n){e&&(void 0===n?void 0===a?e(t):e(t,a):e(t,a,n))},I=function(e,t){i?e.classList.add(t):e.className+=(e.className?" ":"")+t},C=function(e,t){i?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},A=function(e){return e.llTempImage},D=function(e,t){if(t){var a=t._observer;a&&a.unobserve(e)}},R=function(e,t){e&&(e.loadingCount+=t)},T=function(e,t){e&&(e.toLoadCount=t)},L=function(e){for(var t,a=[],n=0;t=e.children[n];n+=1)"SOURCE"===t.tagName&&a.push(t);return a},B=function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&L(a).forEach(t)},q=function(e,t){L(e).forEach(t)},F=[s],M=[s,u],H=[s,d,m],U=function(e){return!!e[v]},z=function(e){return e[v]},V=function(e){return delete e[v]},P=function(e,t){if(!U(e)){var a={};t.forEach((function(t){a[t]=e.getAttribute(t)})),e[v]=a}},J=function(e,t){if(U(e)){var a=z(e);t.forEach((function(t){!function(e,t,a){a?e.setAttribute(t,a):e.removeAttribute(t)}(e,t,a[t])}))}},Y=function(e,t,a){I(e,t.class_loading),w(e,f),a&&(R(a,1),S(t.callback_loading,e,a))},K=function(e,t,a){a&&e.setAttribute(t,a)},W=function(e,t){K(e,m,O(e,t.data_sizes)),K(e,d,O(e,t.data_srcset)),K(e,s,O(e,t.data_src))},$={IMG:function(e,t){B(e,(function(e){P(e,H),W(e,t)})),P(e,H),W(e,t)},IFRAME:function(e,t){P(e,F),K(e,s,O(e,t.data_src))},VIDEO:function(e,t){q(e,(function(e){P(e,F),K(e,s,O(e,t.data_src))})),P(e,M),K(e,u,O(e,t.data_poster)),K(e,s,O(e,t.data_src)),e.load()}},G=["IMG","IFRAME","VIDEO"],Z=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||S(e.callback_finish,t)},Q=function(e,t,a){e.addEventListener(t,a),e.llEvLisnrs[t]=a},X=function(e,t,a){e.removeEventListener(t,a)},ee=function(e){return!!e.llEvLisnrs},te=function(e){if(ee(e)){var t=e.llEvLisnrs;for(var a in t){var n=t[a];X(e,a,n)}delete e.llEvLisnrs}},ae=function(e,t,a){!function(e){delete e.llTempImage}(e),R(a,-1),function(e){e&&(e.toLoadCount-=1)}(a),C(e,t.class_loading),t.unobserve_completed&&D(e,a)},ne=function(e,t,a){var n=A(e)||e;ee(n)||function(e,t,a){ee(e)||(e.llEvLisnrs={});var n="VIDEO"===e.tagName?"loadeddata":"load";Q(e,n,t),Q(e,"error",a)}(n,(function(i){!function(e,t,a,n){var i=x(t);ae(t,a,n),I(t,a.class_loaded),w(t,b),S(a.callback_loaded,t,n),i||Z(a,n)}(0,e,t,a),te(n)}),(function(i){!function(e,t,a,n){var i=x(t);ae(t,a,n),I(t,a.class_error),w(t,g),S(a.callback_error,t,n),i||Z(a,n)}(0,e,t,a),te(n)}))},ie=function(e,t,a){!function(e){e.llTempImage=document.createElement("IMG")}(e),ne(e,t,a),function(e){U(e)||(e[v]={backgroundImage:e.style.backgroundImage})}(e),function(e,t,a){var n=O(e,t.data_bg),i=O(e,t.data_bg_hidpi),r=c&&i?i:n;r&&(e.style.backgroundImage='url("'.concat(r,'")'),A(e).setAttribute(s,r),Y(e,t,a))}(e,t,a),function(e,t,a){var n=O(e,t.data_bg_multi),i=O(e,t.data_bg_multi_hidpi),r=c&&i?i:n;r&&(e.style.backgroundImage=r,function(e,t,a){I(e,t.class_applied),w(e,p),a&&(t.unobserve_completed&&D(e,t),S(t.callback_applied,e,a))}(e,t,a))}(e,t,a)},ce=function(e,t,a){!function(e){return G.indexOf(e.tagName)>-1}(e)?ie(e,t,a):function(e,t,a){ne(e,t,a),function(e,t,a){var n=$[e.tagName];n&&(n(e,t),Y(e,t,a))}(e,t,a)}(e,t,a)},re=function(e){e.removeAttribute(s),e.removeAttribute(d),e.removeAttribute(m)},le=function(e){B(e,(function(e){J(e,H)})),J(e,H)},oe={IMG:le,IFRAME:function(e){J(e,F)},VIDEO:function(e){q(e,(function(e){J(e,F)})),J(e,M),e.load()}},se=function(e,t){(function(e){var t=oe[e.tagName];t?t(e):function(e){if(U(e)){var t=z(e);e.style.backgroundImage=t.backgroundImage}}(e)})(e),function(e,t){N(e)||x(e)||(C(e,t.class_entered),C(e,t.class_exited),C(e,t.class_applied),C(e,t.class_loading),C(e,t.class_loaded),C(e,t.class_error))}(e,t),k(e),V(e)},de=["IMG","IFRAME","VIDEO"],me=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},ue=function(e,t,a){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?function(e,t,a,n){var i=function(e){return _.indexOf(j(e))>=0}(e);w(e,"entered"),I(e,a.class_entered),C(e,a.class_exited),function(e,t,a){t.unobserve_entered&&D(e,a)}(e,a,n),S(a.callback_enter,e,t,n),i||ce(e,a,n)}(e.target,e,t,a):function(e,t,a,n){N(e)||(I(e,a.class_exited),function(e,t,a,n){a.cancel_on_exit&&function(e){return j(e)===f}(e)&&"IMG"===e.tagName&&(te(e),function(e){B(e,(function(e){re(e)})),re(e)}(e),le(e),C(e,a.class_loading),R(n,-1),k(e),S(a.callback_cancel,e,t,n))}(e,t,a,n),S(a.callback_exit,e,t,n))}(e.target,e,t,a)}))},ve=function(e){return Array.prototype.slice.call(e)},fe=function(e){return e.container.querySelectorAll(e.elements_selector)},be=function(e){return function(e){return j(e)===g}(e)},pe=function(e,t){return function(e){return ve(e).filter(N)}(e||fe(t))},ge=function(e,a){var i=l(e);this._settings=i,this.loadingCount=0,function(e,t){n&&!me(e)&&(t._observer=new IntersectionObserver((function(a){ue(a,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))}(i,this),function(e,a){t&&window.addEventListener("online",(function(){!function(e,t){var a;(a=fe(e),ve(a).filter(be)).forEach((function(t){C(t,e.class_error),k(t)})),t.update()}(e,a)}))}(i,this),this.update(a)};return ge.prototype={update:function(e){var t,i,c=this._settings,r=pe(e,c);T(this,r.length),!a&&n?me(c)?function(e,t,a){e.forEach((function(e){-1!==de.indexOf(e.tagName)&&function(e,t,a){e.setAttribute("loading","lazy"),ne(e,t,a),function(e,t){var a=$[e.tagName];a&&a(e,t)}(e,t),w(e,E)}(e,t,a)})),T(a,0)}(r,c,this):(i=r,function(e){e.disconnect()}(t=this._observer),function(e,t){t.forEach((function(t){e.observe(t)}))}(t,i)):this.loadAll(r)},destroy:function(){this._observer&&this._observer.disconnect(),fe(this._settings).forEach((function(e){V(e)})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,a=this._settings;pe(e,a).forEach((function(e){D(e,t),ce(e,a,t)}))},restoreAll:function(){var e=this._settings;fe(e).forEach((function(t){se(t,e)}))}},ge.load=function(e,t){var a=l(t);ce(e,a)},ge.resetStatus=function(e){k(e)},t&&function(e,t){if(t)if(t.length)for(var a,n=0;a=t[n];n+=1)o(e,a);else o(e,t)}(ge,window.lazyLoadOptions),ge}))},Hi3p:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=function(e){var t=e.data,a=e.className,n=void 0===a?"":a,c=e.source,r=void 0===c?"":c,l=e.isSingle,o=void 0!==l&&l;return i.a.createElement("a",{href:"product"===r?null===t||void 0===t?void 0:t.product_url:r?"".concat(t.url,"/").concat(r):t.url,className:"".concat(o?"":"m-1"," badge-tag ").concat(t.isGray?"badge-gray-tag":""," ").concat(n),key:t.id},(null===t||void 0===t?void 0:t.icon_url)&&i.a.createElement("img",{src:t.icon_url,alt:"",width:"16",height:"16",className:"me-1"}),t.name)};t["a"]=i.a.memo(c)},PFmq:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("rAM+"),i=a("k1fw"),c=a("9og8"),r=a("WmNS"),l=a.n(r),o=a("LvDl"),s=a("6Yt9"),d=a("Dp36");function m(e){return!!e&&Boolean(e.match(/(Baiduspider|Googlebot)/))}function u(e,t){return e instanceof Function?(t=e,e={}):e||(e={}),function(){var a=Object(c["a"])(l.a.mark((function a(c){var r,u,v,f,b,p,g,E,h,y,O,j,w,k,N,x,_,S,I,C,A,D,R;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(c.initResult||(c.initResult={}),p=new d["U"](c.serverData),g=c.store,E=c.isServer?null===(r=c.serverData)||void 0===r?void 0:r.Token:Object(s["b"])(),c.isServer&&!Object(o["isEmpty"])(c.serverData)&&g.dispatch({type:"global/saveServerData",payload:c.serverData}),g.dispatch({type:"global/saveSessionInfo",payload:Object(i["a"])(Object(i["a"])({},(null===(u=g.getState().global)||void 0===u?void 0:u.sessionInfo)||{}),{},{key:E})}),!c.isServer||m(null===(v=c.serverData)||void 0===v?void 0:v.userAgent)){a.next=12;break}return a.next=9,p.getTemporaryToken();case 9:h=a.sent,c.initResult.eggCtx&&c.initResult.eggCtx.cookies.set("PHPSESSID",h.key,Object(i["a"])({httpOnly:!1,signed:!1,maxAge:6048e5},{domain:".".concat(c.initResult.eggCtx.request.host)})),g.dispatch({type:"global/saveSessionInfo",payload:h});case 12:if(y=g.getState(),O=(null===(f=y.global)||void 0===f?void 0:f.sessionInfo)||{},!c.isServer||!O.login){a.next=19;break}return a.next=17,p.getUser();case 17:j=a.sent,g.dispatch({type:"global/saveUser",payload:j});case 19:if(w={},"object"===typeof e&&(w=e),!w.requireLogin||O.login){a.next=27;break}return c.initResult.action="redirect",c.initResult.param="/user/login",a.abrupt("return",y);case 27:if(!w.requireNotLogin||!O.login){a.next=31;break}return c.initResult.action="redirect",c.initResult.param="/",a.abrupt("return",y);case 31:if(g.dispatch({type:"global/saveRoute",payload:Object(i["a"])({customLayout:c.route.customLayout||!1,headerType:c.route.headerType,platform:null===(b=c.serverData)||void 0===b?void 0:b.platform},c.initResult)}),!t){a.next=38;break}return a.next=35,t(c);case 35:a.t0=a.sent,a.next=39;break;case 38:a.t0=y;case 39:if(k=a.t0,!w.redirectVerify){a.next=61;break}N=Object(n["a"])(w.redirectVerify),a.prev=42,N.s();case 44:if((x=N.n()).done){a.next=53;break}if(_=x.value,S=Object(o["get"])(k,_),Object(o["isEmpty"])(S)||!S.redirect_url){a.next=51;break}return c.initResult.action="redirect",c.initResult.param=S.redirect_url,a.abrupt("break",53);case 51:a.next=44;break;case 53:a.next=58;break;case 55:a.prev=55,a.t1=a["catch"](42),N.e(a.t1);case 58:return a.prev=58,N.f(),a.finish(58);case 61:if(I=Object(o["get"])(k,"global.routeInterceptor"),!I||!I.path){a.next=65;break}return"noMoreList"===I.path?c.initResult.action="404":(c.initResult.action="redirect",c.initResult.param=I.path),a.abrupt("return",k);case 65:if(!c.initResult.action){a.next=67;break}return a.abrupt("return",k);case 67:if(!w.requireState){a.next=87;break}C=Object(n["a"])(w.requireState),a.prev=69,C.s();case 71:if((A=C.n()).done){a.next=79;break}if(D=A.value,R=Object(o["get"])(k,D),R&&!Object(o["isEmpty"])(R)){a.next=77;break}return!O.login&&w.emptyStateToLogin?(c.initResult.action="redirect",c.initResult.param="/user/login"):c.initResult.action="404",a.abrupt("break",79);case 77:a.next=71;break;case 79:a.next=84;break;case 81:a.prev=81,a.t2=a["catch"](69),C.e(a.t2);case 84:return a.prev=84,C.f(),a.finish(84);case 87:return a.abrupt("return",k);case 88:case"end":return a.stop()}}),a,null,[[42,55,58,61],[69,81,84,87]])})));return function(e){return a.apply(this,arguments)}}()}},PmrS:function(e,t,a){},SoKV:function(e,t,a){},TB1r:function(e,t,a){"use strict";var n=a("9og8"),i=a("tJVT"),c=a("WmNS"),r=a.n(c),l=a("q1tI"),o=a.n(l),s=a("6xyR"),d=a("wwbV"),m=a("Dp36"),u=a("0lfv"),v=a("6Yt9"),f=function(e){var t,a,c,f=e.user,b=Object(l["useState"])(null!==f&&void 0!==f&&f.is_followed?1:0),p=Object(i["a"])(b,2),g=p[0],E=p[1],h=Object(l["useState"])(null===f||void 0===f?void 0:f.followers),y=Object(i["a"])(h,2),O=y[0],j=y[1];Object(l["useEffect"])((function(){j(null===f||void 0===f?void 0:f.followers)}),[null===f||void 0===f?void 0:f.followers]);var w=function(){var e=Object(n["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(v["c"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return Object(m["rb"])({id:f.id,type:"user",isFollow:g?0:1}).then((function(e){j(null!==e&&void 0!==e&&e.is_followed?O+1:O-1),E(null===e||void 0===e?void 0:e.is_followed)})),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(s["a"],null,o.a.createElement(s["a"].Body,null,o.a.createElement("div",{className:"d-flex align-items-center mb-3"},o.a.createElement("picture",{className:"rounded-circle me-3"},o.a.createElement("a",{href:null===f||void 0===f?void 0:f.url},o.a.createElement("img",{src:(null===f||void 0===f?void 0:f.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"avatar",width:"64",height:"64",className:"rounded-circle"}))),o.a.createElement("div",null,o.a.createElement("h5",{className:"mb-0"},o.a.createElement("a",{href:null===f||void 0===f?void 0:f.url,className:"text-body"},null===f||void 0===f?void 0:f.name)),Boolean(null===f||void 0===f||null===(t=f.user_auth)||void 0===t?void 0:t.is_auth)&&(null===f||void 0===f||null===(a=f.user_auth)||void 0===a?void 0:a.info)&&o.a.createElement("div",{className:"mt-2 font-size-14 authentication-info"},o.a.createElement("i",{className:"me-1 text-warning fas fa-badge-check"}),null===f||void 0===f||null===(c=f.user_auth)||void 0===c?void 0:c.info))),(null===f||void 0===f?void 0:f.excerpt)&&o.a.createElement("div",{className:"text-secondary text-truncate-2 userExcerpt mb-3",dangerouslySetInnerHTML:{__html:null===f||void 0===f?void 0:f.excerpt}}),o.a.createElement("div",{className:"d-flex align-items-center mb-3"},o.a.createElement("div",{className:"me-4"},o.a.createElement("strong",null,Object(u["l"])(null===f||void 0===f?void 0:f.rank)),o.a.createElement("span",{className:"text-secondary"}," \u58f0\u671b")),o.a.createElement("div",null,o.a.createElement("strong",null,Object(u["l"])(O)||0),o.a.createElement("span",{className:"text-secondary"}," \u7c89\u4e1d"))),o.a.createElement("div",{className:"d-grid"},o.a.createElement(d["a"],{variant:"primary",onClick:w},g?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u4f5c\u8005"))))};t["a"]=o.a.memo(f)},YKRR:function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),c=a.n(i),r=a("EVdn"),l=function(){var e=function(){r("body,html").animate({scrollTop:0})},t=Object(i["useState"])(0),a=Object(n["a"])(t,2),l=a[0],o=a[1],s=function(){o(window.scrollY)};return Object(i["useEffect"])((function(){return window.addEventListener("scroll",s),function(){window.removeEventListener("scroll",s)}})),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"fixedTools",className:"position-fixed d-none ".concat(l>720?"d-xl-flex":""),style:{right:"24px",bottom:"24px"}},c.a.createElement("button",{type:"button",className:"btn btn-light",title:"\u56de\u9876\u90e8",onClick:e},"\u25b2")))};t["a"]=l},YdHu:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=function(e,t){var a=e.children,n=e.onClick,c=e.className,r=e.domType,l=void 0===r?"a":r;return"a"===l?i.a.createElement("a",{href:"###",className:c,ref:t,onClick:function(e){e.preventDefault(),n(e)}},a):"button"===l?i.a.createElement("button",{className:c,ref:t,onClick:function(e){e.preventDefault(),n(e)}}):i.a.createElement("div",{className:c,ref:t,onClick:function(e){e.preventDefault(),n(e)}},a)};t["a"]=i.a.forwardRef(c)},cor7:function(e,t,a){"use strict";a.r(t);var n=a("0Owb"),i=a("9og8"),c=a("jrin"),r=a("k1fw"),l=a("oBTY"),o=a("tJVT"),s=a("WmNS"),d=a.n(s),m=a("q1tI"),u=a.n(m),v=a("6xyR"),f=a("sjrs"),b=a("NAXS"),p=a("dYPq"),g=a("LvDl"),E=a("ArA+"),h=a("9kvl"),y=a("0lfv"),O=a("j3+s"),j=function(){var e=Object(h["f"])();return function(t){var a=Object(y["f"])();if(e(t),"sf_app"===a){var n=Object(O["a"])();n.send("syncToRNDispatch",t)}}},w=a("tSvB"),k=a("QojX"),N=a("HRRZ"),x=(a("gZRy"),function(e){var t=e.isChild,a=void 0!==t&&t,n=e.item,i=e.parentItem,c=e.onChangeOfComment,l=e.onComment,o=Object(m["useRef"])(null);return Object(m["useEffect"])((function(){if(o.current&&(Object(p["a"])(o.current),n.original_text)){var e=n.original_text.length;o.current.setSelectionRange(e,e)}}),[o]),u.a.createElement(k["a"],{className:"edit-form ".concat(a?"edit-reply-form":"")},u.a.createElement(N["a"],{className:"mb-3"},u.a.createElement(k["a"].Control,{as:"textarea",className:"comment-text",rows:1,ref:o,autoFocus:!0,value:n.original_text,size:"sm",onChange:function(e){i?c(Object(r["a"])(Object(r["a"])({},n),{},{original_text:e.target.value}),i):c(Object(r["a"])(Object(r["a"])({},n),{},{original_text:e.target.value}))},placeholder:"\u64b0\u5199\u8bc4\u8bba ...",isInvalid:n.isInvalid}),u.a.createElement(k["a"].Control.Feedback,{type:"invalid"},n.errorMsg)),u.a.createElement("div",{className:"my-3 d-flex align-content-center justify-content-end"},u.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm me-2 edit-top-comment-cancel-btn cancelEdit",onClick:function(){i?c(Object(r["a"])(Object(r["a"])({},n),{},{isEdit:!1}),i):c(Object(r["a"])(Object(r["a"])({},n),{},{isEdit:!1}))}},"\u53d6\u6d88"),u.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return l({item:n,parentItem:i})},disabled:!n.original_text},"\u63d0\u4ea4")))}),_=u.a.memo(x),S=a("TUci"),I=a("wwbV"),C=a("97+O"),A=a("YdHu"),D=a("Dp36"),R=(a("212T"),5),T=function(e){var t=e.element,a=e.children,n=e.pageUsers,i=Object(m["useState"])([]),c=Object(o["a"])(i,2),r=c[0],s=c[1],d=Object(m["useRef"])(null),v=Object(m["useState"])(""),f=Object(o["a"])(v,2),b=f[0],p=f[1],E=Object(m["useState"])([]),h=Object(o["a"])(E,2),y=h[0],O=h[1],j=Object(m["useState"])(0),w=Object(o["a"])(j,2),k=w[0],N=w[1],x=Object(m["useState"])(!1),_=Object(o["a"])(x,2),S=_[0],I=_[1];Object(m["useEffect"])((function(){if(t)return t.addEventListener("input",T),function(){t.removeEventListener("input",T)}}),[t]),Object(m["useEffect"])((function(){var e=n[window.location.pathname];O(Object(g["uniqBy"])(e?[].concat(Object(l["a"])(e),Object(l["a"])(r)):Object(l["a"])(r),"id"))}),[n,r,b]);var T=function(){var e=t.value,a=t.selectionStart,n=void 0===a?0:a;if(e.indexOf("@")<0&&p(""),n){var i=e.substring(e.substring(0,n).lastIndexOf("@"),n);i.substring(i.lastIndexOf(" "),n).indexOf("@")<0||(p(i.substring(1)),i.substring(1)&&(S||(I(!0),Object(D["Ld"])().then((function(e){s(e)})))))}},L=function(e){var a=t.value,n=t.selectionStart,i=void 0===n?0:n;if(i){var c=a.substring(a.substring(0,i).lastIndexOf("@"),i),r="@".concat(null===e||void 0===e?void 0:e.name,"[").concat(null===e||void 0===e?void 0:e.slug,"] ");t.value="".concat(a.substring(0,a.substring(0,i).lastIndexOf("@"))).concat(r).concat(a.substring(i)),O([]),p("");var l=i+r.length-c.length;t.setSelectionRange(l,l),t.focus()}},B=b?y.filter((function(e){return 0===e.name.indexOf(b)||0===e.slug.indexOf(b)})):[],q=function(e){var t=e.keyCode;if(38===t&&k>0&&(e.preventDefault(),N(k-1)),40===t&&k<B.length-1&&(e.preventDefault(),N(k+1)),13===t&&k>-1&&k<=B.length-1){e.preventDefault();var a=B[k];L(a),N(0)}};return u.a.createElement(C["a"],{className:"mentions-wrap",show:B.length>0,onKeyDown:q},a,u.a.createElement(C["a"].Toggle,{as:A["a"],domType:"div",id:"mentions-toggle"}),u.a.createElement(C["a"].Menu,{className:B.length>0?"visabled":"hidden",ref:d},B.filter((function(e,t){return t<R})).map((function(e,t){return u.a.createElement(C["a"].Item,{className:"".concat(k===t?"bg-gray-200":""),key:t,onClick:function(){return L(e)}},u.a.createElement("img",{className:"avatar-24 me-2",src:e.avatar_url||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07"}),u.a.createElement("span",{className:"text-body me-1"},e.name),u.a.createElement("small",{className:"text-secondary"},"@",e.slug))}))))},L=Object(h["b"])((function(e){var t=e.global;return{pageUsers:t.pageUsers}}))(u.a.memo(T)),B=!0,q=function(e){var t=e.item,a=e.parentItem,n=e.onChangeOfComment,i=e.onComment,c=e.className,l=e.onEditComment,s=Object(m["useState"])(!1),d=Object(o["a"])(s,2),v=d[0],f=d[1],b=Object(m["useRef"])(null),g=Object(m["useState"])({isInvalid:!1,msg:""}),E=Object(o["a"])(g,2),h=E[0],y=E[1];Object(m["useEffect"])((function(){if(null!==b&&void 0!==b&&b.current&&(Object(p["a"])(b.current),t.commentVal)){var e=t.commentVal.length;b.current.setSelectionRange(e,e)}}),[b]);var O=function(e){y(e)},j=function(e){var n=e.keyCode;13===n&&(e.ctrlKey||e.metaKey)&&B&&(B=!1,setTimeout((function(){B=!0}),700),i({item:t,parentItem:a,callback:O}))};return u.a.createElement(k["a"],{className:"card-body add-comment-form ".concat(c),onKeyDown:j},u.a.createElement(N["a"],{className:"mb-3"},u.a.createElement("small",{className:"text-secondary"},"\u56de\u590d"," ",u.a.createElement("a",{href:t.user.url,onClick:function(e){l(t,a||"",e)}},t.user.name," \xd7")),u.a.createElement(L,{element:b.current},u.a.createElement(k["a"].Control,{as:"textarea",value:t.commentVal,autoFocus:!0,ref:b,size:"sm",rows:1,onChange:function(e){a?n(Object(r["a"])(Object(r["a"])({},t),{},{commentVal:e.target.value}),a):n(Object(r["a"])(Object(r["a"])({},t),{},{commentVal:e.target.value}))},className:"form-control form-control-sm comment-reply mt-2",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",isInvalid:h.isInvalid})),u.a.createElement(k["a"].Control.Feedback,{type:"invalid"},h.msg)),u.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},u.a.createElement("a",{href:"###",className:"me-3",onClick:function(e){e.preventDefault(),f(!v)},tabIndex:-1},u.a.createElement("i",{className:"far fa-circle-info text-secondary"})),u.a.createElement(I["a"],{size:"sm",className:"float-end",onClick:function(){return i({item:t,parentItem:a,callback:O})},disabled:!t.commentVal},"\u63d0\u4ea4\u8bc4\u8bba")),u.a.createElement(S["a"],{show:v,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002"))},F=u.a.memo(q),M=a("6Yt9"),H=!0,U=function(e){var t=e.commentContent,a=e.isShowComment,n=e.inputRef,i=e.setCommentContent,c=e.onComment,r=e.sessionUser,l=Object(m["useState"])(!1),s=Object(o["a"])(l,2),d=s[0],f=s[1],b=Object(m["useState"])({isInvalid:!1,msg:""}),p=Object(o["a"])(b,2),g=p[0],E=p[1];Object(m["useEffect"])((function(){a&&n.current.focus()}),[a]);var h=function(e){E(e)},y=function(e){var t=e.keyCode;13===t&&(e.ctrlKey||e.metaKey)&&H&&(H=!1,setTimeout((function(){H=!0}),700),c({item:"comment",callback:h}))};return u.a.createElement(v["a"],{className:"bg-light border-0 mt-2 ".concat(a?"":"hidden"),onKeyDown:y,tabIndex:2},u.a.createElement(v["a"].Body,null,u.a.createElement("div",{className:"media-body"},u.a.createElement(N["a"],{className:"mb-3"},u.a.createElement(L,{element:n.current},u.a.createElement(k["a"].Control,{as:"textarea",rows:1,ref:n,value:t,size:"sm",onChange:function(e){i(e.target.value)},className:"comment-text",placeholder:"\u8be2\u95ee\u7ec6\u8282\u6216\u63d0\u51fa\u4fee\u6539\u610f\u89c1",onFocus:function(e){r||(e.preventDefault(),Object(M["c"])(),n.current.blur())},isInvalid:g.isInvalid})),u.a.createElement(k["a"].Control.Feedback,{type:"invalid"},g.msg)),u.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},u.a.createElement("small",{className:"text-secondary"},"\u5982\u679c\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u8bb0\u5f97\u70b9\u8d5e\u652f\u6301"),u.a.createElement("div",{className:"sflex-center"},u.a.createElement("a",{href:"###",className:"me-3",onClick:function(e){e.preventDefault(),f(!d)},"aria-label":"\u63d0\u793a",tabIndex:-1},u.a.createElement("i",{className:"far fa-circle-info text-secondary"})),u.a.createElement(I["a"],{size:"sm",className:"float-end",onClick:function(){return c({item:"comment",callback:h})},disabled:!t},"\u63d0\u4ea4\u8bc4\u8bba")))),u.a.createElement(S["a"],{show:d,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002")))},z=Object(h["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(U)),V=a("pJDg"),P=a("cWnB"),J=function(e){var t=e.allTotal,a=e.sort,n=e.setSort,i=e.aId;return u.a.createElement(v["a"].Header,{className:"d-flex align-items-center justify-content-between bg-transparent"},u.a.createElement("strong",null,t," \u6761\u8bc4\u8bba"),u.a.createElement(V["a"],{"aria-label":"Basic"},u.a.createElement(P["a"],{as:"a",href:"/a/".concat(i,"?sort=votes"),size:"sm",variant:"votes"===a?"secondary":"outline-secondary",onClick:function(e){e.preventDefault(),n("votes")}},"\u5f97\u7968"),u.a.createElement(P["a"],{as:"a",href:"/a/".concat(i,"?sort=newest"),size:"sm",variant:"newest"===a?"secondary":"outline-secondary",onClick:function(e){e.preventDefault(),n("newest")}},"\u6700\u65b0")))},Y=u.a.memo(J),K=!0,W=function(e){var t,a=e.commentContent,n=e.inputRef,i=e.setCommentContent,c=e.onComment,r=e.sessionUser,l=Object(m["useState"])(!1),s=Object(o["a"])(l,2),d=s[0],v=s[1],f=Object(m["useState"])({isInvalid:!1,msg:""}),b=Object(o["a"])(f,2),p=b[0],g=b[1],E=function(e){g(e)},h=function(e){var t=e.keyCode;13===t&&(e.ctrlKey||e.metaKey)&&K&&a&&(K=!1,setTimeout((function(){K=!0}),700),c({item:"comment",callback:E}))};return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"mb-4 media",onKeyDown:h,tabIndex:1},u.a.createElement("img",{src:(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",className:"rounded-circle me-3",width:"38",height:"38","aria-hidden":"true"}),u.a.createElement("div",{className:"media-body"},u.a.createElement(N["a"],{className:"mb-3"},u.a.createElement(L,{element:n.current},u.a.createElement(k["a"].Control,{as:"textarea",rows:1,ref:n,value:a,onChange:function(e){i(e.target.value)},className:"comment-text",placeholder:"\u64b0\u5199\u8bc4\u8bba \u2026",onFocus:function(e){Object(M["c"])()||(e.preventDefault(),n.current.blur())},"aria-label":"\u8bc4\u8bba",isInvalid:p.isInvalid})),u.a.createElement(k["a"].Control.Feedback,{type:"invalid"},p.msg)),u.a.createElement("div",{className:"d-flex justify-content-end align-items-center"},u.a.createElement("a",{href:"###",className:"me-3",onClick:function(e){e.preventDefault(),v(!d)},"aria-label":"\u63d0\u793a",tabIndex:-1},u.a.createElement("i",{className:"far fa-circle-info text-secondary"})),u.a.createElement(I["a"],{className:"float-end",onClick:function(){return c({item:"comment",callback:E})},disabled:!a},"\u63d0\u4ea4\u8bc4\u8bba")),u.a.createElement(S["a"],{show:d,variant:"info",className:"mt-3 my-0 font-size-14"},"\u8bc4\u8bba\u652f\u6301\u90e8\u5206 Markdown \u8bed\u6cd5\uff1a",u.a.createElement("code",null,"**\u7c97\u4f53** _\u659c\u4f53_ [\u94fe\u63a5](http://example.com) `\u4ee3\u7801` - \u5217\u8868 > \u5f15\u7528"),"\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 ",u.a.createElement("code",null,"@ "),"\u6765\u901a\u77e5\u5176\u4ed6\u7528\u6237\u3002"))))},$=Object(h["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(W)),G=a("zhAr"),Z=15,Q=function(e){var t=e.total,a=e.page,n=e.getData,i=function(){var e=document.getElementById("comment-area"),t=-65,a=e.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:a})},c=function(e){n(e),i()};return u.a.createElement("div",{className:"d-flex justify-content-center mt-4 mb-1"},u.a.createElement(G["a"],{size:"sm",className:"mb-0"},u.a.createElement(G["a"].Item,{disabled:1===a,onClick:function(){return c(a-1)}},"\u4e0a\u4e00\u9875"),Object(l["a"])(Array(Math.ceil(t/Z))).map((function(){return 0})).map((function(e,t){return u.a.createElement(G["a"].Item,{key:"page".concat(t),active:a===t+1,onClick:function(){return c(t+1)}},t+1)})),u.a.createElement(G["a"].Item,{disabled:a===Object(l["a"])(Array(Math.ceil(t/Z))).map((function(){return 0})).length,onClick:function(){return c(a+1)}},"\u4e0b\u4e00\u9875")))},X=Object(h["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(Q)),ee=function(e){var t,a,n=e.sessionUser,i=e.item,c=e.onEditComment,r=e.onEdit,l=e.onRemove,s=e.onReport,d=Object(m["useState"])(i.is_liked),v=Object(o["a"])(d,2),f=v[0],b=v[1],p=Object(m["useState"])(i.votes),g=Object(o["a"])(p,2),E=g[0],h=g[1],O=function(e,t){t.preventDefault(),Object(M["c"])()&&Object(D["K"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){h(f?E-1:E+1),b(!f)}))},j=(null===(t=i.member_actions)||void 0===t?void 0:t.filter((function(e){return"edit"===e.action})).length)>0,w=(null===(a=i.member_actions)||void 0===a?void 0:a.filter((function(e){return"delete"===e.action})).length)>0;return u.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},u.a.createElement("div",null,u.a.createElement("a",{className:"text-secondary",href:"###",onClick:function(e){return O(i,e)}},u.a.createElement("span",{className:"mainLike-comment ".concat(f?"text-primary":"")},u.a.createElement("i",{className:"fa-w-16 ".concat(f?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),E>0&&u.a.createElement("span",{className:"mainLike-commentNum ms-1"},E)),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary btn-comment",href:"###",onClick:function(e){c(i,"",e)}},"\u56de\u590d"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("span",{className:"text-secondary"},Object(y["d"])(i.created))),u.a.createElement("div",{className:"control-area d-none"},n&&j&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary edit",href:"###",onClick:function(e){e.preventDefault(),r(i)}},"\u7f16\u8f91"),u.a.createElement("span",{className:"split-dot"})),n&&w&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary delete",href:"###",onClick:function(e){return l(i.id,e)}},"\u5220\u9664"),u.a.createElement("span",{className:"split-dot"})),n&&u.a.createElement("a",{className:"text-secondary comment-report",href:"###",onClick:function(e){return s(i,e)}},"\u4e3e\u62a5")))},te=Object(h["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(ee)),ae=function(e){var t,a,n=e.sessionUser,i=e.item,c=e.subItem,r=e.onEditComment,l=e.onEdit,s=e.onRemove,d=e.onReport,v=Object(m["useState"])(c.is_liked),f=Object(o["a"])(v,2),b=f[0],p=f[1],g=Object(m["useState"])(c.votes),E=Object(o["a"])(g,2),h=E[0],O=E[1],j=function(e,t){t.preventDefault(),Object(M["c"])()&&Object(D["K"])({id:e.id,is_like:e.is_liked?0:1}).then((function(){O(b?h-1:h+1),p(!b)}))},w=(null===(t=c.member_actions)||void 0===t?void 0:t.filter((function(e){return"edit"===e.action})).length)>0,k=(null===(a=c.member_actions)||void 0===a?void 0:a.filter((function(e){return"delete"===e.action})).length)>0;return u.a.createElement("div",{className:"handle-bar font-size-14 d-flex justify-content-between"},u.a.createElement("div",null,u.a.createElement("a",{className:"text-secondary",href:"###",onClick:function(e){return j(c,e)}},u.a.createElement("span",{className:"mainLike-comment ".concat(b?"text-primary":"")},u.a.createElement("i",{className:"fa-w-16 ".concat(b?"fas fa-thumbs-up":"far fa-thumbs-up"),style:{width:"1em"}})),h>0&&u.a.createElement("span",{className:"mainLike-commentNum  ms-1"},h)),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("a",{className:"text-secondary btn-reply",href:"###",onClick:function(e){r(c,i,e)}},"\u56de\u590d"),u.a.createElement("span",{className:"split-dot"}),u.a.createElement("span",{className:"text-secondary"},Object(y["d"])(c.created))),u.a.createElement("div",{className:"comment-control-area d-none"},n&&w&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary edit",href:"###",onClick:function(e){e.preventDefault(),l(c,i)}},"\u7f16\u8f91"),u.a.createElement("span",{className:"split-dot"})),n&&k&&u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{className:"text-secondary delete",href:"###",onClick:function(e){return s(c.id,e)}},"\u5220\u9664"),u.a.createElement("span",{className:"split-dot"})),n&&u.a.createElement("a",{className:"text-secondary reply-report",href:"###",onClick:function(e){return d(c,e)}},"\u4e3e\u62a5")))},ne=Object(h["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(u.a.memo(ae)),ie=(a("9cdK"),""),ce=["question","answer"],re=15,le=3,oe=function(e){var t=e.id,a=e.mode,s=void 0===a?"article":a,h=e.isShowComment,k=void 0!==h&&h,N=e.setCommentState,x=e.event_object,S=e.user,I=void 0===S?{}:S,C=e.isFetchComments,A=void 0===C||C,R=e.memberActions,T=void 0===R?[]:R,L=Object(m["useRef"])(null),B=Object(m["useState"])(""),q=Object(o["a"])(B,2),H=q[0],U=q[1],V=j(),P=Object(E["a"])(),J=P.location.query,K=void 0===J?{}:J;L.current&&(L.current.value=H);var W=Object(m["useState"])([]),G=Object(o["a"])(W,2),Z=G[0],Q=G[1],ee=Object(m["useState"])({isShow:!1,id:""}),ae=Object(o["a"])(ee,2),oe=ae[0],se=ae[1],de=Object(m["useState"])({page:1,init:!0}),me=Object(o["a"])(de,2),ue=me[0],ve=me[1],fe=Object(m["useState"])(0),be=Object(o["a"])(fe,2),pe=be[0],ge=be[1],Ee=Object(m["useState"])(0),he=Object(o["a"])(Ee,2),ye=he[0],Oe=he[1],je=Object(m["useState"])("newest"===K.sort?"newest":"votes"),we=Object(o["a"])(je,2),ke=we[0],Ne=we[1],xe=Object(m["useState"])(!1),_e=Object(o["a"])(xe,2),Se=_e[0],Ie=_e[1],Ce=Object(m["useState"])(!1),Ae=Object(o["a"])(Ce,2),De=Ae[0],Re=Ae[1],Te=Object(m["useRef"])({}),Le=Object(m["useState"])(!1),Be=Object(o["a"])(Le,2),qe=Be[0],Fe=Be[1];Object(m["useEffect"])((function(){L.current&&Object(p["a"])(L.current)}),[L]),Object(m["useEffect"])((function(){ve({page:1,init:!0})}),[t]),Object(m["useEffect"])((function(){A?1===ue.page&&!0===ue.init&&He():Q([])}),[ue,A]),Object(m["useEffect"])((function(){qe?ve({page:1,init:!0}):Fe(!0)}),[ke]),Object(m["useEffect"])((function(){Se&&(Z.map((function(e){return e.hidden=!1,e})),Q(Object(g["orderBy"])(Z,["created"])))}),[Se]),Object(m["useEffect"])((function(){if(!Object(g["isEmpty"])(Z)&&!Object(g["isEmpty"])(x)&&t===String(x.root.object_id)&&s===x.root.type&&t===String(x.root.object_id)&&"comment"===x.current.type){var e,a,n,i=Object(g["findIndex"])(Z,["id",Number((null===x||void 0===x||null===(e=x.current)||void 0===e?void 0:e.object_id)||0)]);if(i<0)Z.forEach((function(e){a=[].concat(Object(l["a"])(a||[]),Object(l["a"])(e.replies||[]))})),i=Object(g["findIndex"])(a,["id",Number((null===x||void 0===x||null===(n=x.current)||void 0===n?void 0:n.object_id)||0)]);["question","answer"].includes(s)&&i>le-1&&(Z.splice(i,1),Q([x.current.comment].concat(Object(l["a"])(Z)))),-1===i&&Q([x.current.comment].concat(Object(l["a"])(Z)))}}),[Z,x]),Object(m["useEffect"])((function(){V({type:"global/pushPageUser",payload:{pathName:window.location.pathname,users:Z.map((function(e){return null===e||void 0===e?void 0:e.user}))}}),"question"==s&&V({type:"action/saveComments",payload:{id:t,comments:"article"===s?ye:null===Z||void 0===Z?void 0:Z.length}})}),[Z]);var Me=function(e){var a=e.item,n=e.parentItem,i=e.callback;return new Promise((function(e,c){if(Object(M["c"])()){var o,d,m={};if(n)m={reply_comment_id:n.id,reply_user_id:null===(o=a.user)||void 0===o?void 0:o.id};else if(null!==a&&void 0!==a&&a.isReply)m={reply_comment_id:a.reply_comment_id||a.id,reply_user_id:null===(d=a.user)||void 0===d?void 0:d.id};a.id&&!a.isReply&&a.isEdit?Object(D["le"])(Object(r["a"])(Object(r["a"])({id:a.id,object_id:t},m),{},{text:null===a||void 0===a?void 0:a.original_text})).then((function(e){Q(n?Z.map((function(t){return(null===t||void 0===t?void 0:t.id)===n.id&&(null===t||void 0===t||t.replies.forEach((function(t){t.id===e.id&&(t.isEdit=!1,t.parsed_text=e.parsed_text)}))),t})):Z.map((function(t){return t.id===e.id&&(t.parsed_text=null===e||void 0===e?void 0:e.parsed_text,t.isEdit=!1),t}))),"function"===typeof N&&N(!1)}))["finally"]((function(){e(!0)})):Object(D["J"])(Object(r["a"])(Object(r["a"])({object_id:t},m),{},{text:(null===a||void 0===a?void 0:a.commentVal)||H})).then((function(e){if("function"===typeof i&&i({isInvalid:!1,msg:""}),"string"===typeof a?U(""):Q(Z.map((function(e){return n?e.id===n.id&&e.replies.forEach((function(e){e.id===a.id&&(e.isReply=!1)})):e.id===a.id&&(e.isReply=!1,e.commentVal=""),e}))),"article"===s&&"string"!==typeof a)Q(Z.map((function(t){if(n){if(t.id===n.id){var i=Object(g["findIndex"])(t.replies,{id:a.id});t.replies.splice(i+1,0,e.comment)}}else t.id===a.id&&(Object(g["isEmpty"])(t.replies)?t.replies=[e.comment]:t.replies.unshift(e.comment));return t})));else if("string"!==typeof a){var t=Object(g["findIndex"])(Z,{id:a.id});Z.splice(t+1,0,e.comment),Q(Z)}else Q([e.comment].concat(Object(l["a"])(Z)));"function"===typeof N&&N(!1)}))["catch"]((function(e){null!==e&&void 0!==e&&e.isError&&"function"===typeof i&&i({isInvalid:!0,msg:e.reply_comment_id||e.text})}))["finally"]((function(){e(!0)}))}else c(!1)}))},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.commentId,n=void 0===a?"":a,i=e.commentPage,l=void 0===i?1:i,o=l;n?ue[n]?(ue[n].page+=1,ve(Object(r["a"])(Object(r["a"])({},ue),{},{init:!1})),o=ue[n].page):ve(Object(r["a"])(Object(r["a"])(Object(r["a"])({},ue),Object(c["a"])({},n,{page:1})),{},{init:!1})):ve(Object(r["a"])(Object(r["a"])({},ue),{},{page:l,init:!1})),Object(D["Fb"])({objectId:t,commentId:n,page:o,sort:"newest"===ke?"newest":"votes",is_direct:"article"===s?0:1}).then((function(e){e&&Ue({commentId:n,res:e,page:o})}))},Ue=function(e){var a=e.commentId,n=e.res,i=e.page;if(a){var c=Z.map((function(e){return e.id===a&&(e.replies=Object(g["orderBy"])(1===i?n.comments:[].concat(Object(l["a"])(e.replies),Object(l["a"])(n.comments)),["created"])),e}));Q(Object(g["uniqBy"])(c,"id")||[])}else 1===i&&(ge(n.total),Oe(n.all_total),V({type:"action/saveComments",payload:{id:t,comments:n.all_total}})),!Se&&ce.includes(s)&&(n.comments=Object(g["orderBy"])(n.comments,["votes"],["desc"]).map((function(e,t){return e.hidden=t>le-1,e}))),Q("article"===s?Object(g["uniqBy"])(n.comments,"id")||[]:(1===i?Object(g["orderBy"])(Object(g["uniqBy"])(n.comments,"id"),["created"]):Object(g["orderBy"])(Object(g["uniqBy"])([].concat(Object(l["a"])(Z),Object(l["a"])(n.comments)),"id"),["created"]))||[])},ze=function(e,t,a){var n;a.preventDefault(),n=t?Z.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply,t.isEdit=!1),t}))),a})):Z.map((function(t){return t.id===e.id&&(t.isReply=!t.isReply,t.isEdit=!1),t})),Q(n)},Ve=function(e,t){var a;a="object"===typeof t?Z.map((function(a){return a.id===(null===t||void 0===t?void 0:t.id)&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t=e),t}))),a})):Z.map((function(t){return t.id===e.id&&(t=e),t})),Q(a)},Pe=function(e,t){t.preventDefault();var a=Object(y["f"])();if("sf_app"===a){var n=Object(O["a"])();return n.send("report",{id:e.id}),!1}se({id:e.id,isShow:!0})},Je=function(e){se(Object(r["a"])(Object(r["a"])({},oe),{},{isShow:e}))},Ye=function(e,t){var a;a=t?Z.map((function(a){return a.id===t.id&&(a.replies=a.replies.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit,t.isReply=!1),t}))),a})):Z.map((function(t){return t.id===e.id&&(t.isEdit=!t.isEdit,t.isReply=!1),t})),Q(a)},Ke=function(e,t){t.preventDefault(),w["w"].confirm({title:"\u5220\u9664\u8bc4\u8bba",content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417",onSuccess:function(){var t=Object(i["a"])(d.a.mark((function t(){return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["W"])(e);case 2:He();case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()})};Object(m["useEffect"])((function(){if(!De&&!Object(g["isEmpty"])(Te.current)&&ie&&We(ie)){var e=Te.current[ie];e&&Object(y["m"])(e),Re(!0)}}));var We=Object(m["useCallback"])((function(e){var a=Object(y["j"])({eventObj:x,id:e,type:"comment",parentId:t});return a&&(ie=e),a}),[x]),$e=pe-(Se?null===ue||void 0===ue?void 0:ue.page:0)*re,Ge=Z.filter((function(e){return!(null!==e&&void 0!==e&&e.hidden)}));return u.a.createElement("div",null,("question"===s||"answer"===s)&&u.a.createElement(z,{commentContent:H,isShowComment:k,inputRef:L,setCommentContent:U,onComment:Me,id:t}),u.a.createElement(v["a"],{id:"comment-area",className:"comment-wrap ".concat("article"===s?"":0===Z.length?"hidden":"bg-light border-0 mt-2")},"article"===s&&u.a.createElement(Y,{allTotal:ye,sort:ke,setSort:Ne,aId:t}),u.a.createElement(v["a"].Body,{className:"article"===s?"":"p-3"},"article"===s&&u.a.createElement($,{commentContent:H,inputRef:L,setCommentContent:U,onComment:Me,id:t}),u.a.createElement("div",{className:"comment-body-wrap ".concat(Z.filter((function(e){return!e.hidden})).length<1&&"d-none")},Ge.map((function(e,a){var n,i,c,r,l,o,d,m,p=e.parsed_text,E=e.reply_user;return Object(g["isEmpty"])(E)||p.includes('<a href="'.concat(E.url,'">@').concat(E.name,"</a>"))||(p=p.replace(/^<p>/,'<p><a href="'.concat(E.url,'">@').concat(E.name,"</a> "))),u.a.createElement("div",{ref:function(t){return Te.current[e.id]=t},key:e.id,className:"mb-r media d-flex align-items-start ".concat(Ge.length!==a+1&&("article"===s?"mb-4":"mb-3"))},"article"===s&&u.a.createElement("img",{className:"d-block rounded-circle me-3",width:"38",height:"38",src:(null===(n=e.user)||void 0===n?void 0:n.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:""}),u.a.createElement("div",{className:"w-0 media-body ".concat(We(e.id)?"scroll-warning":"")},u.a.createElement("div",{className:"commentUnit ".concat("question"===s||"answer"===s?"font-size-14":"")},u.a.createElement("div",{className:"mb-1"},u.a.createElement("a",{className:"d-uname",href:null===(i=e.user)||void 0===i?void 0:i.url,target:"_blank"},u.a.createElement("strong",null,null===(c=e.user)||void 0===c?void 0:c.name),"article"===s&&(null===(r=e.user)||void 0===r?void 0:r.id)===(null===I||void 0===I?void 0:I.id)&&u.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!e.isEdit&&u.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:p}})),e.isEdit&&u.a.createElement(_,{onChangeOfComment:Ve,item:e,onComment:Me}),u.a.createElement(te,{item:e,onEditComment:ze,onEdit:Ye,onRemove:Ke,onReport:Pe,memberActions:T}),e.isReply&&u.a.createElement(v["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(F,{id:t,className:"".concat("question"===s||"answer"==s?"p-0":"p-3"),onChangeOfComment:Ve,item:e,onComment:Me,onEditComment:ze}))),u.a.createElement("div",{className:"replies ".concat(Object(g["isEmpty"])(e.replies)?"hidden":"")},u.a.createElement(v["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(v["a"].Body,{className:"p-3"},u.a.createElement(f["a"],{className:"reply-list"},null===(l=e.replies)||void 0===l?void 0:l.map((function(a,n){var i,c,r,l=a.parsed_text,o=a.reply_user;return Object(g["isEmpty"])(o)||l.includes('<a href="'.concat(o.url,'">@').concat(o.name,"</a>"))||(l=l.replace(/^<p>/,'<p><a href="'.concat(o.url,'">@').concat(o.name,"</a> "))),u.a.createElement(b["a"],{key:a.id,ref:function(e){return Te.current[a.id]=e},className:"p-0 border-0 commentUnit ".concat(e.replies.length!==n+1&&"mb-3"," ").concat(We(a.id)?"scroll-warning":""," ")},u.a.createElement("div",{className:"font-size-14 mb-1"},u.a.createElement("a",{className:"d-uname",href:null===(i=a.user)||void 0===i?void 0:i.url,target:"_blank"},u.a.createElement("strong",null,null===(c=a.user)||void 0===c?void 0:c.name),"article"===s&&(null===(r=a.user)||void 0===r?void 0:r.id)===(null===I||void 0===I?void 0:I.id)&&u.a.createElement("span",{className:"text-secondary"},"\uff08\u4f5c\u8005\uff09")),"\uff1a",!a.isEdit&&u.a.createElement("div",{className:"parsedText fmt",dangerouslySetInnerHTML:{__html:l}})),a.isEdit&&u.a.createElement(_,{isChild:!0,onChangeOfComment:Ve,item:a,parentItem:e,onComment:Me}),u.a.createElement(ne,{item:e,subItem:a,onEditComment:ze,onEdit:Ye,onRemove:Ke,onReport:Pe}),a.isReply&&u.a.createElement(v["a"],{className:"bg-light border-0 mt-2"},u.a.createElement(F,{id:t,onChangeOfComment:Ve,item:a,onComment:Me,parentItem:e,className:"p-0",onEditComment:ze})))}))),e.replies&&e.replies_total>e.replies.length&&e.replies_total-((null===(o=ue[e.id])||void 0===o?void 0:o.page)||0)*re>0&&u.a.createElement("div",{className:"font-size-14 d-flex mt-3"},u.a.createElement("a",{className:"text-secondary next-page-btn",href:"###",onClick:function(t){t.preventDefault(),He({commentId:e.id})}},e.replies_total<re?"\u5171 ".concat(e.replies_total," \u6761\u56de\u590d"):"\u66f4\u591a ".concat(re>e.replies_total-((null===(d=ue[e.id])||void 0===d?void 0:d.page)||0)*re?e.replies_total-((null===(m=ue[e.id])||void 0===m?void 0:m.page)||0)*re:re," \u6761\u56de\u590d"))))))))}))),"article"===s?pe>re&&u.a.createElement(X,{total:pe,page:ue.page,getData:function(e){return He({commentPage:e})}}):pe>le&&$e>0&&u.a.createElement("div",{className:"font-size-14 d-flex mt-3"},u.a.createElement("a",{className:"text-secondary next-page-btn",href:"###",onClick:function(e){e.preventDefault(),Se?He({commentPage:ue.page+1}):Ie(!0)}},pe<re?"\u5171 ".concat(pe," \u6761\u8bc4\u8bba"):"\u66f4\u591a ".concat(re>$e?$e:re," \u6761\u8bc4\u8bba"))))),u.a.createElement(w["r"],Object(n["a"])({},oe,{setModalStatus:Je})))};t["default"]=u.a.memo(oe)},fX46:function(e,t,a){e.exports=a.p+"static/bg-169.62e63408.svg"},gZRy:function(e,t,a){},heTN:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("Hi3p"),r=function(e){var t=e.tags,a=void 0===t?[]:t,n=e.className,r=void 0===n?"":n,l=e.site,o=e.isSite,s=void 0!==o&&o,d=e.source,m=void 0===d?"":d,u=(null===a||void 0===a?void 0:a.length)>0?i.a.createElement("div",{className:"d-flex flex-wrap align-items-center ".concat(r)},i.a.createElement("div",{className:"m-n1 d-flex flex-wrap align-items-center"},!s&&(null===l||void 0===l?void 0:l.thumbnail_url)&&i.a.createElement("a",{className:"m-1",href:l.url},i.a.createElement("img",{src:l.thumbnail_url,alt:l.name,width:"24",height:"24",style:{borderRadius:"0.1875rem",verticalAlign:"top"}})),a.map((function(e){return i.a.createElement(c["a"],{data:e,key:e.id,source:m})})))):null;return u};t["a"]=i.a.memo(r)},kUPb:function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),c=a.n(i),r=a("9vsu"),l=a("97+O"),o=a("pJDg"),s=a("cWnB"),d=a("dDCJ"),m=a("24g8"),u=a("QeUd"),v=a("aWbt"),f=a("0FX9"),b=a.n(f),p=a("9kvl"),g=a("wFk/"),E=a("YdHu"),h=a("tSvB"),y=a("Dp36"),O=a("6Yt9"),j=function(e){var t=e.mode,a=void 0===t?"default":t,f=e.id,p=e.actionData,j=e.title,w=void 0===j?"":j,k=e.banner,N=void 0===k?"":k,x=e.dispatch,_=e.showShare,S=void 0!==_&&_,I=e.source,C=e.showComment,A=void 0===C||C,D=e.isAuthor,R=void 0!==D&&D,T=e.sticky,L=void 0===T||T,B=e.style,q=void 0===B?{}:B,F=e.likeBtnSize,M=void 0===F?"lg":F,H=e.showLikeBtn,U=void 0===H||H,z=e.showHateBtn,V=void 0!==z&&z,P=e.showBookmarkBtn,J=void 0===P||P,Y=e.showShareBtn,K=void 0===Y||Y,W=e.isNotHandle,$=void 0===W?{like:!1,hate:!1,haveAccess:!1}:W,G=e.isBaiduOxApp,Z=void 0!==G&&G,Q=e.realViews,X=void 0===Q?0:Q,ee=p.isLiked,te=void 0!==ee&&ee,ae=p.votes,ne=void 0===ae?0:ae,ie=p.bookmarks,ce=void 0===ie?0:ie,re=p.isBookmarked,le=void 0!==re&&re,oe=p.isHated,se=void 0!==oe&&oe,de=p.comments,me=void 0===de?0:de,ue=Object(i["useState"])(ne),ve=Object(n["a"])(ue,2),fe=ve[0],be=ve[1],pe=Object(i["useState"])(se),ge=Object(n["a"])(pe,2),Ee=ge[0],he=ge[1],ye=Object(i["useState"])(ce),Oe=Object(n["a"])(ye,2),je=Oe[0],we=Oe[1],ke=Object(i["useState"])(te),Ne=Object(n["a"])(ke,2),xe=Ne[0],_e=Ne[1],Se=Object(i["useState"])(le),Ie=Object(n["a"])(Se,2),Ce=Ie[0],Ae=Ie[1],De=Object(i["useState"])(!1),Re=Object(n["a"])(De,2),Te=Re[0],Le=Re[1],Be=Object(i["useState"])(""),qe=Object(n["a"])(Be,2),Fe=qe[0],Me=qe[1],He=Object(i["useState"])(""),Ue=Object(n["a"])(He,2),ze=Ue[0],Ve=Ue[1],Pe=Object(i["useState"])(""),Je=Object(n["a"])(Pe,2),Ye=Je[0],Ke=Je[1],We=Object(i["useState"])(""),$e=Object(n["a"])(We,2),Ge=$e[0],Ze=$e[1],Qe=Object(i["useState"])(!1),Xe=Object(n["a"])(Qe,2),et=Xe[0],tt=Xe[1],at=Object(i["useState"])(!1),nt=Object(n["a"])(at,2),it=nt[0],ct=nt[1],rt=Object(i["useRef"])(),lt=Object(i["useRef"])(),ot=Object(i["useRef"])();Object(i["useEffect"])((function(){var e,t;null!==(e=window.navigator)&&void 0!==e&&null!==(t=e.canShare)&&void 0!==t&&t.call(e,{text:w})&&ct(!0)}),[]),Object(i["useEffect"])((function(){_e(te),Ae(le),be(ne),we(ce),he(se)}),[te,le,ne,ce,se]),Object(i["useEffect"])((function(){Me("".concat(window.location.origin).concat(window.location.pathname)),Ve("\u3010".concat(w,"\u3011\u5206\u4eab\u81ea @segment_fault\uff0c\u4f20\u9001\u95e8\uff1a")),Ke("\u3010".concat(w,"\u3011\u5206\u4eab\u81ea @SegmentFault\uff0c\u4f20\u9001\u95e8\uff1a"))}),[Fe]),Object(i["useEffect"])((function(){if(!Ge){var e,t=null===(e=document)||void 0===e?void 0:e.querySelector(".qrcode");b.a.toCanvas(t,window.location.href,{margin:0},(function(e,t){Ze(t.toDataURL())}))}}),[Ge]);var st=function(){if(Object(O["c"])())if($.like)h["w"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8d5e"});else if(!R||"article"!==I&&"video"!==I)if("product-score"!==I||$.haveAccess){var e=Ee?2:1;be(xe?fe-e:fe+e),_e(!xe),he(!1),x({type:"action/saveLike",payload:{id:f,votes:xe?fe-e:fe+e,isLiked:!xe,isHated:!1}}),Object(y["Bc"])({id:f,type:I,is_like:xe?0:1})["catch"]((function(){be(fe),_e(xe),he(Ee),x({type:"action/saveLike",payload:{id:f,votes:fe,isLiked:xe,isHated:Ee}})}))}else x({type:"global/saveProductAuthModalState",payload:{isShow:!0,title:"\u70b9\u8d5e"}});else h["w"].confirm({content:"\u4f60\u662f\u4f5c\u8005\uff0c\u65e0\u6cd5\u5bf9\u81ea\u5df1\u8fdb\u884c\u6b64\u64cd\u4f5c"})},dt=function(){Object(O["c"])()&&Le(!0)},mt=function(e){we(e?je+1:je-1),Ae(e),x({type:"action/saveBookmark",payload:{id:f,bookmarks:e?je+1:je-1,isBookmarked:e}})},ut=function(){if(Object(O["c"])())if($.hate)h["w"].confirm({content:"\u4e0d\u80fd\u7ed9\u81ea\u5df1\u70b9\u8e29"});else if("product-score"!==I||$.haveAccess){var e=xe?2:1;_e(!1),be(Ee?fe+e:fe-e),x({type:"action/saveLike",payload:{id:f,votes:Ee?fe+e:fe-e,isLiked:!1,isHated:!Ee}}),Object(y["qc"])({id:f,type:I,is_hate:Ee?0:1})["catch"]((function(){he(Ee),_e(xe),be(fe),tt(Ee),x({type:"action/saveLike",payload:{id:f,votes:fe,isLiked:xe,isHated:Ee}})}))}else x({type:"global/saveProductAuthModalState",payload:{isShow:!0,title:"\u70b9\u8e29"}})},vt=function(){navigator.share({title:w,text:w+"- SegmentFault \u601d\u5426\uff0c\u4f20\u9001\u95e8\uff1a",url:"".concat(window.location.origin).concat(window.location.pathname)})},ft=c.a.createElement(r["a"],{id:"popover-basic"},c.a.createElement(r["a"].Body,null,"\u5982\u679c\u8be5\u5185\u5bb9\u6709\u53ef\u6539\u8fdb\u7684\u4f59\u5730\uff0c\u6b22\u8fce\u901a\u8fc7\u8bc4\u8bba\u7ed9\u4f5c\u8005\u5efa\u8bae\u3002")),bt=c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"text-center mt-2",style:{cursor:"auto"}},c.a.createElement("div",{className:"qr"},c.a.createElement("img",{crossOrigin:"anonymous",src:Ge,width:"118",height:"118"})),"\u626b\u4e00\u626b\u5206\u4eab"),c.a.createElement("div",{className:"dropdown-divider"}),c.a.createElement(l["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&rt.current.click()}},c.a.createElement(m["a"],{title:Ye,url:Fe,image:N,ref:rt,className:"btn w-100 ps-4 pe-4 pt-1 pb-1 text-start"},c.a.createElement("i",{className:"fab fa-weibo fa-fw"})," \u65b0\u6d6a\u5fae\u535a")),c.a.createElement(l["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&lt.current.click()}},c.a.createElement(u["a"],{title:ze,url:Fe,ref:lt,className:"btn w-100 ps-4 pe-4 pt-1 pb-1 text-start"},c.a.createElement("i",{className:"fab fa-twitter fa-fw"})," Twitter")),c.a.createElement(l["a"].Item,{className:"p-0",onKeyDown:function(e){13===e.keyCode&&ot.current.click()}},c.a.createElement(v["a"],{title:ze,url:Fe,ref:ot,className:"btn w-100 ps-4 pe-4 pt-1 pb-1 text-start"},c.a.createElement("i",{className:"fab fa-facebook fa-fw"})," Facebook")));return c.a.createElement(c.a.Fragment,null,"default"===a&&c.a.createElement("div",{className:"sticky-wrap ".concat(L?"sticky-top":""," functional-area-left d-none d-xl-flex justify-content-center pt-5 ").concat("article"===I?"functional-area-left2":""),style:q},c.a.createElement(o["a"],{vertical:!0,className:"align-items-center"},U&&c.a.createElement(s["a"],{variant:"outline-primary",className:"func-btn mainLike  sflex-center shadow-sm rounded-circle main-".concat(M,"-Like ").concat(V?"mb-2":"mb-3"),active:xe,onClick:st,"aria-label":"\u70b9\u8d5e"},c.a.createElement("i",{className:"far fa-thumbs-up"}),"question"===I||"answer"===I||"product-score"===I?c.a.createElement("span",{className:"mainLikeNum ".concat(0!==fe?"":"invisible")},fe):c.a.createElement("span",{className:"mainLikeNum ".concat(fe>0?"":"invisible")},fe)),V&&c.a.createElement(d["a"],{trigger:"click",placement:"right",show:et,overlay:ft},c.a.createElement(s["a"],{variant:"outline-secondary",className:"shadow-sm func-btn sflex-center rounded-circle main-".concat(M,"-Like main-hate mb-3"),active:Ee,onClick:ut,onBlur:function(){return tt(!1)},"aria-label":"\u70b9\u8e29"},c.a.createElement("i",{className:"far fa-thumbs-down fa-flip-horizontal"}))),J&&c.a.createElement(s["a"],{variant:"outline-secondary",className:"func-btn sflex-center rounded-circle mb-2",onClick:dt,active:Ce,"aria-label":"\u6536\u85cf"},c.a.createElement("i",{className:"far fa-bookmark"})),A&&c.a.createElement("a",{className:"func-btn sflex-center btn btn-outline-secondary rounded-circle mb-2",href:"#comment-area","aria-label":"\u8bc4\u8bba"},c.a.createElement("i",{className:"far fa-message-lines"})),K&&c.a.createElement(l["a"],null,c.a.createElement(l["a"].Toggle,{as:E["a"],className:"func-btn nav-tab-item  rounded-pill btn btn-outline-secondary sflex-center rounded-circle",id:"actions-toggle"},c.a.createElement("i",{className:"far fa-share-nodes"})),c.a.createElement(l["a"].Menu,{className:"dropdown-menu-down",show:S},bt)))),"btnGroup"===a&&c.a.createElement("div",{className:"functional-area-bottom text-center"},c.a.createElement(o["a"],{className:"btn-group like-group align-items-center",role:"group"},c.a.createElement(s["a"],{className:"btn me-2 rounded",variant:"outline-primary",active:xe,onClick:st},c.a.createElement("i",{className:"far fa-thumbs-up"}),c.a.createElement("span",{className:"ms-1"},xe?"\u5df2\u8d5e":"\u8d5e"),fe>0&&c.a.createElement("span",{className:"mainLikeNum ms-1"},fe)),J&&c.a.createElement(s["a"],{className:"btn me-2 rounded",variant:"outline-secondary",active:Ce,onClick:dt},c.a.createElement("i",{className:"far fa-bookmark"}),c.a.createElement("span",{className:"ms-1"},Ce?"\u5df2\u6536\u85cf":"\u6536\u85cf"),ce>0&&c.a.createElement("span",{className:"ms-1"},ce)),!Z&&c.a.createElement(l["a"],{className:"bottom-share-wrap"},c.a.createElement(l["a"].Toggle,{as:E["a"],className:"nav-tab-item btn d-flex justify-content-center align-items-center",id:"share-bottom-toggle"},c.a.createElement(s["a"],{className:"btn rounded",variant:"outline-secondary",active:!1},c.a.createElement("i",{className:"far fa-share-nodes"}),c.a.createElement("span",{className:"ms-1"},"\u5206\u4eab"))),c.a.createElement(l["a"].Menu,{className:"dropdown-menu-down"},bt)))),"fixBottom"===a&&c.a.createElement("div",{className:"w-100 fixed-bottom-action d-flex align-items-center "},"article"===I&&c.a.createElement("a",{className:"text-center text-body w-25",onClick:st},xe?c.a.createElement("i",{className:"fas fa-thumbs-up"}):c.a.createElement("i",{className:"far fa-thumbs-up"}),fe>0&&c.a.createElement("span",{className:"mainLikeNum ms-1"},fe)),"question"===I&&c.a.createElement("a",{className:"text-center text-body w-25",onClick:function(e){e.preventDefault()}},c.a.createElement("i",{className:"far fa-eye"}),X>0&&c.a.createElement("span",{className:"mainLikeNum ms-1"},X)),c.a.createElement("a",{className:"text-center text-body w-25",onClick:function(e){e.preventDefault(),dt()}},Ce?c.a.createElement("i",{className:"fas fa-bookmark"}):c.a.createElement("i",{className:"far fa-bookmark"}),ce>0&&c.a.createElement("span",{className:"mainLikeNum ms-1"},ce)),c.a.createElement("a",{className:"text-center text-body w-25",href:"#comment-area"},c.a.createElement("i",{className:"far fa-message-lines"}),me>0&&c.a.createElement("span",{className:"mainLikeNum ms-1"},me)),!Z&&it&&c.a.createElement("a",{className:"text-center text-body w-25",onClick:function(e){e.preventDefault(),vt()}},c.a.createElement("i",{className:"far fa-share-nodes text-body"})),!Z&&!it&&c.a.createElement(l["a"],{className:"bottom-share-wrap w-25 text-center "},c.a.createElement(l["a"].Toggle,{as:"a",id:"share-bottom-toggle"},c.a.createElement("i",{className:"far fa-share-nodes text-body"})),c.a.createElement(l["a"].Menu,{className:"dropdown-menu-down"},bt))),c.a.createElement(g["a"],{id:f,isShow:Te,setShowStatus:Le,setBookmarkedState:mt,source:I,isBookmarked:le}),c.a.createElement("canvas",{hidden:!0,className:"qrcode"}))};t["a"]=Object(p["b"])((function(e){var t=e.global;return{isBaiduOxApp:t.isBaiduOxApp}}))(c.a.memo(j))},kwfb:function(e,t,a){"use strict";var n=a("tJVT"),i=a("q1tI"),c=a.n(i),r=function(e){var t=e.name,a=Object(i["useState"])(""),r=Object(n["a"])(a,2),l=r[0],o=r[1],s=Object(i["useRef"])(null);return Object(i["useEffect"])((function(){var e,a=null;null!==(e=window.OA_output)&&void 0!==e&&e[t]&&clearInterval(a),a=setInterval((function(){var e,n;null!==(e=window.OA_output)&&void 0!==e&&e[t]&&(null!==(n=window.OA_output)&&void 0!==n&&n[t]&&clearInterval(a),o(window.OA_output[t]))}))}),[]),Object(i["useEffect"])((function(){l&&l.indexOf("adsbygoogle")>-1&&(window.adsbygoogle=window.adsbygoogle||[]).push({}),s.current&&s.current.querySelectorAll("script").forEach((function(e){var t=document.querySelectorAll("head > script[src='".concat(e.src,"']"));if((null===t||void 0===t?void 0:t.length)>0)e.remove();else{var a=document.createElement("script");e.src&&(a.src=e.src,e.remove(),document.head.appendChild(a))}}))}),[l]),c.a.createElement("div",{ref:s,id:"OA_holder_".concat(t),className:"ad-container",style:{display:5===Number(t)?"none":"block"},dangerouslySetInnerHTML:{__html:l}})};t["a"]=r},nWVH:function(e,t,a){},nlcd:function(e,t,a){"use strict";var n=a("EVdn");t["a"]=function(){var e,t='\n  <div class="is-active ImageView p-4" style="display: none;">\n      <div class="ImageView-inner" style="overflow: auto;">\n          <img src="" class="ImageView-img" alt="preview" style="max-width: 100%">\n      </div>\n  </div>',a=1,i=n("article img"),c=[],r=null===(e=n(".ImageView").find("img").attr("src"))||void 0===e?void 0:e[0];i.each((function(e,t){var i,l,o=n(t).attr("src")||n(t).attr("data-src");null===(i=o)||void 0===i||!i.startsWith("/img/")||null!==(l=o)&&void 0!==l&&l.match(/\/view$/)||(o.indexOf("?")>-1?o=o.substring(0,o.indexOf("?"))+"/view"+o.substring(o.indexOf("?")):o+="/view"),null!==r&&void 0!==r&&r.includes(o)&&(a=e),o&&c.push(o)})),n("body ImageView")&&n(".ImageView").remove(),n("body").append(t).on("keydown",(function(e){var t;"none"!==(null===(t=n(".ImageView"))||void 0===t?void 0:t.css("display"))&&(37===e.keyCode&&a>0&&(a-=1,n(".ImageView").find("img").attr("src",c[a])),39===e.keyCode&&a<(null===c||void 0===c?void 0:c.length)-1&&(a+=1,n(".ImageView").find("img").attr("src",c[a])))})).on("click",".ImageView",(function(){n(this).fadeOut()})).on("click","article img",(function(){var e,t,a=n(this).attr("src");n(this).parents("a").length||(null===(e=a)||void 0===e||!e.startsWith("/img/")||null!==(t=a)&&void 0!==t&&t.match(/\/view$/)||(a.indexOf("?")>-1?a=a.substring(0,a.indexOf("?"))+"/view"+a.substring(a.indexOf("?")):a+="/view"),n(".ImageView").find("img").attr("src",a)[0].onload=function(){n(".ImageView").fadeIn()})}))}},oGiJ:function(e,t,a){"use strict";a.r(t);var n=a("9og8"),i=a("k1fw"),c=a("tJVT"),r=a("WmNS"),l=a.n(r),o=a("q1tI"),s=a.n(o),d=a("7vrA"),m=a("3Z9Z"),u=a("JI6e"),v=a("TUci"),f=a("+VcZ"),b=a.n(f),p=a("Mlv5"),g=a("EVdn"),E=a("LvDl"),h=a("Ty5D"),y=a("9kvl"),O=a("Wgwc"),j=a.n(O),w=function(e){var t,a,n,i,c,r,l,o=e.id,d=e.extra,m=e.status,u=e.sessionUser,f=void 0===u?{}:u;return s.a.createElement(s.a.Fragment,null,"rejected"===m&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{className:""},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.reason}}),s.a.createElement("div",null,s.a.createElement("span",null,"\u4f60\u53ef\u4ee5"),s.a.createElement("a",{href:"/a/".concat(o,"/edit")}," \u518d\u6b21\u7f16\u8f91 "),s.a.createElement("span",null,"\u4ee5\u91cd\u65b0\u53d1\u8868"))),s.a.createElement("div",{className:"mt-3"},"\u6ce8\u610f\uff1a\u5982\u679c\u8be5\u5185\u5bb9"),s.a.createElement("ul",null,s.a.createElement("li",null,"\u8fde\u7eed 3 \u6b21\u53d1\u8868\u672a\u901a\u8fc7"),s.a.createElement("li",null,"\u53d1\u8868\u672a\u6210\u529f\u4e00\u5468\u5185\u672a\u505a\u4efb\u4f55\u6539\u52a8")),s.a.createElement("div",{className:"mt-3"},"\u90fd\u5c06\u88ab\u7cfb\u7edf\u81ea\u52a8\u5220\u9664\uff0c\u5982\u6709\u5fc5\u8981\uff0c\u8bf7\u505a\u597d\u5907\u4efd\u3002")),"deleted"===m&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:d.reason}}),(null===d||void 0===d?void 0:d.operator)&&s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===d||void 0===d||null===(t=d.operator)||void 0===t?void 0:t.url},null===d||void 0===d||null===(a=d.operator)||void 0===a?void 0:a.name))),"hidden"===m&&(null===f||void 0===f||null===(n=f.roles)||void 0===n?void 0:n.is_editor)&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.reason}}),null!==d&&void 0!==d&&d.operator?s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===d||void 0===d||null===(i=d.operator)||void 0===i?void 0:i.url},null===d||void 0===d||null===(c=d.operator)||void 0===c?void 0:c.name)):""),"locked"===m&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:d.reason}}),s.a.createElement("div",null,"\u64cd\u4f5c\u8005\uff1a",s.a.createElement("a",{href:null===d||void 0===d||null===(r=d.operator)||void 0===r?void 0:r.url},null===d||void 0===d||null===(l=d.operator)||void 0===l?void 0:l.name),s.a.createElement("br",null),"\u64cd\u4f5c\u8005\u65f6\u95f4\uff1a",j.a.unix(null===d||void 0===d?void 0:d.operator_time).format("YYYY-MM-DD HH:mm"))))},k=w,N=a("6xyR"),x=a("sjrs"),_=a("NAXS"),S=a("0lfv"),I=function(e){var t,n=e.data;return s.a.createElement(_["a"],{as:"a",className:"d-flex align-items-center py-3",href:"".concat(null===n||void 0===n?void 0:n.url,"?utm_source=sf-similar-article"),target:"_blank",action:!0,active:!1},s.a.createElement("div",null,s.a.createElement("h5",{className:"mb-2 text-break",style:{color:"#212529"}},null===n||void 0===n?void 0:n.title),s.a.createElement("div",{className:"text-secondary font-size-14 text-truncate-1 mb-2"},null===n||void 0===n?void 0:n.excerpt),s.a.createElement("p",{className:"d-flex align-items-center font-size-14 mb-0"},s.a.createElement("span",{className:"text-primary  mr-13"},null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.name),(null===n||void 0===n?void 0:n.votes)>0&&s.a.createElement("span",{className:"text-secondary mr-13"},"\u8d5e ",Object(S["l"])(null===n||void 0===n?void 0:n.votes)),(null===n||void 0===n?void 0:n.views)>0&&s.a.createElement("span",{className:"text-secondary mr-13"},"\u9605\u8bfb ",Object(S["l"])(null===n||void 0===n?void 0:n.views)),(null===n||void 0===n?void 0:n.comments)>0&&s.a.createElement("span",{className:"text-secondary"},"\u8bc4\u8bba ",Object(S["l"])((null===n||void 0===n?void 0:n.comments)||0)))),(null===n||void 0===n?void 0:n.cover)&&s.a.createElement("picture",{className:"ms-3 d-none d-sm-block"},s.a.createElement("img",{src:a("fX46"),className:"rounded",style:{background:"no-repeat center url(".concat(null===n||void 0===n?void 0:n.cover,")"),backgroundSize:"cover"},alt:"\u5c01\u9762\u56fe",width:"146",height:"82"})))},C=s.a.memo(I),A=(a("wroQ"),function(e){var t=e.list,a=void 0===t?[]:t;return a.length?s.a.createElement(N["a"],{className:"my-4"},s.a.createElement(N["a"].Header,{className:"bg-transparent"},s.a.createElement("strong",null,"\u7ee7\u7eed\u9605\u8bfb")),s.a.createElement(x["a"],{variant:"flush"},a.map((function(e){return s.a.createElement(C,{key:null===e||void 0===e?void 0:e.id,data:e})})))):null}),D=s.a.memo(A),R=a("tSvB"),T=a("YKRR"),L=a("paDM"),B=a("kwfb"),q=a("6T2I"),F=a("cor7"),M=a("5ui+"),H=a("kUPb"),U=a("php9"),z=a("hS4W"),V=a.n(z),P=(a("47/0"),function(e){var t=e.isFixed,a=e.setFixedState;Object(o["useEffect"])((function(){var e=V.a.get("articleNavFixed");"true"===e&&a(!0)}),[]);var n=function(e){var t=e.target.checked;a(t);var n=V.a.get("articleNavFixed");String(t)!==n&&V.a.set("articleNavFixed",t,{expires:7})},i=function(){var e=g("#article-nav-list").offset().top,t=g("#article-nav-list a.text-primary").offset().top,a=t-e;if(a>232){var n=232*Math.floor(a/232);g("#collapseTarget").scrollTop(n)}else g("#collapseTarget").scrollTop(0)};return s.a.createElement(N["a"],{className:"overflow-hidden d-none d-xl-flex","data-article-nav":!0},s.a.createElement(N["a"].Header,{className:"d-flex justify-content-between align-items-center  bg-white "},s.a.createElement("strong",{className:"nav-header p-0"},"\u6587\u7ae0\u76ee\u5f55"),s.a.createElement(U["a"],{type:"switch",id:"follow-switch",className:"mb-0",checked:t,onChange:n,label:"\u8ddf\u968f"})),s.a.createElement(N["a"].Body,{className:"p-0 py-2",onMouseLeave:i,id:"collapseTarget"},s.a.createElement("nav",{id:"article-nav-list",className:"list-group list-group-flush d-flex flex-column font-size-14","data-article-nav-list":!0})))}),J=s.a.memo(P),Y=a("TB1r"),K=a("Dp36"),W=a("fWQN"),$=a("mtLc"),G=function(){function e(t,a,n){Object(W["a"])(this,e),this.$parent=void 0,this.$article=void 0,this.$headList=void 0,this.callback=void 0,this.$parent=t,this.$article=a,this.callback=n,this.init()}return Object($["a"])(e,[{key:"buildNavTitle",value:function(){var e,t,a,n=this;for(a=1;a<=3;a++)if(this.$article.find("h"+a).length){t=3===a?this.$article.find("h"+a):this.$article.find("h".concat(a,", h").concat(a+1));break}var i=0,c=0;t&&t.length&&t.each((function(e,t){t.nodeName.substr(1,1)==a?(i++,g(t).attr("id","item-".concat(i)),n.$parent.append('<a class="list-group-item list-group-item-action border-0 text-secondary text-truncate-1" href="#item-'.concat(i,'">').concat(g(t).text().replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),"</a>"))):(c++,g(t).attr("id","item-".concat(i,"-").concat(c)),n.$parent.append('<a class="list-group-item list-group-item-action border-0 text-secondary text-truncate-1 nav2" href="#item-'.concat(i,"-").concat(c,'">').concat(g(t).text().replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),"</a>")))}));var r=[],l=[],o=[];null===(e=t)||void 0===e||e.each((function(e,t){switch(t.tagName){case"H1":r.push(t.tagName);break;case"H2":l.push(t.tagName);break;case"H3":o.push(t.tagName);break}}));var s=!1;return(r.length>=2||0===r.length&&l.length>=2||0===r.length&&0===l.length&&o.length>=2)&&(s=!0),!(!t||!s)&&!!t}},{key:"init",value:function(){if(this.$parent){var e=this.buildNavTitle();e?(this.$parent.parents("div[data-article-nav]").show(),this.callback instanceof Function&&this.callback(),g(document).on("click","[data-article-nav] a",(function(){g("div[data-article-nav] a").addClass("text-secondary").removeClass("text-primary"),g(this).removeClass("text-secondary").addClass("text-primary")}))):this.$parent.parents("div[data-article-nav]").remove()}}}]),e}(),Z=a("nlcd"),Q=a("9F+u"),X=a("2CDT"),ee=!1,te=function(e){if(null!==e&&void 0!==e&&e.length)for(var t=0;t<e.length;t++){var a,n,i=(null===(a=document)||void 0===a||null===(n=a.getElementById(e[t].substr(1)))||void 0===n?void 0:n.getBoundingClientRect().top)||0;if(i>10&&i<80){if(t>6&&t%7===1){var c=e.length>16?8*Math.floor(t/7)*29:29*(e.length-8);ee=!0,g("#collapseTarget").scrollTop(c)}else t<8&&t>=0&&ee&&(ee=!1,g("#collapseTarget").scrollTop(0));g("div[data-article-nav] a").addClass("text-secondary").removeClass("text-primary"),g(g("#article-nav-list a")[t]).removeClass("text-secondary").addClass("text-primary")}}},ae=a("PFmq"),ne=(a("SoKV"),a("PmrS"),new S["a"]),ie=function e(t){var a,n,r,l,f,y=t.artDetail,O=t.action,j=t.match,w=t.dispatch,N=t.sessionUser,x=t.articleRelated,_=t.isBaiduOxApp,I=void 0!==_&&_,C=Object(h["g"])(),A=Object(o["useRef"])(null);A.current=null===N||void 0===N||null===(a=N.user)||void 0===a?void 0:a.id;var U=j,z=U.params,V=z.aid,P=z.lang,W=void 0===P?null:P,$=y[V]||{},ee=$.article,ae=void 0===ee?{}:ee,ie=$.actions,ce=$.extra,re=$.member_actions,le=$.tag,oe=void 0===le?{}:le,se=$.blog,de=void 0===se?{}:se,me=$.description,ue=$.keywords,ve=$.pay_info,fe=(null===N||void 0===N?void 0:N.roles)||{},be=fe.is_editor,pe=Number(null===ae||void 0===ae||null===(n=ae.user)||void 0===n?void 0:n.id)===(null===N||void 0===N||null===(r=N.user)||void 0===r?void 0:r.id),ge=Object(o["useState"])(!1),Ee=Object(c["a"])(ge,2),he=Ee[0],ye=Ee[1],Oe=Object(o["useState"])(""),je=Object(c["a"])(Oe,2),we=je[0],ke=je[1],Ne=Object(o["useState"])(null),xe=Object(c["a"])(Ne,2),_e=xe[0],Se=xe[1],Ie=Object(o["useState"])(!1),Ce=Object(c["a"])(Ie,2),Ae=Ce[0],De=Ce[1],Re=Object(o["useState"])(!1),Te=Object(c["a"])(Re,2),Le=Te[0],Be=Te[1],qe=Object(p["a"])(),Fe=qe.height,Me=void 0===Fe?0:Fe,He=qe.ref,Ue=Object(p["a"])(),ze=Ue.height,Ve=void 0===ze?0:ze,Pe=Ue.ref,Je=Object(p["a"])(),Ye=Je.height,Ke=void 0===Ye?0:Ye,We=Je.ref;Object(o["useEffect"])((function(){Object(E["isEmpty"])(y[V])&&w({type:"articleDetail/getArtDetail",payload:{aid:V,lang:W},callback:function(e){"error"===e&&C.replace("/404")}})}),[V]),Object(o["useEffect"])((function(){if(null!==ae&&void 0!==ae&&ae.tags){var e,t=null===ae||void 0===ae?void 0:ae.tags.map((function(e){return e.name})),a=null===t||void 0===t?void 0:t.join(",");Object(X["a"])(a,null===N||void 0===N||null===(e=N.user)||void 0===e?void 0:e.rank)}}),[null===ae||void 0===ae?void 0:ae.tags]);var $e=function(){w({type:"articleDetail/getArtDetail",payload:{aid:V,lang:W,isRefresh:!1},callback:function(){}})};Object(o["useEffect"])((function(){var e=Object(S["g"])(window.location.href,"openShare");return ye(Boolean("true"===e)),Object(Z["a"])(),Object(Q["a"])("article"),window.addEventListener("scroll",Ge),function(){window.removeEventListener("scroll",(function(){return te("")})),window.removeEventListener("scroll",Ge)}}),[]),Object(o["useEffect"])((function(){if(!Object(E["isEmpty"])(ae)){var e,t=Object(S["g"])(window.location.href,"_ea")||"",a=Object(S["g"])(window.location.href,"cid")||"";t&&null!==N&&void 0!==N&&null!==(e=N.user)&&void 0!==e&&e.id&&Object(K["pc"])(t).then((function(e){Se(e)})),a&&Object(K["Vb"])(a).then((function(e){Se(e)})),new G(g("nav[data-article-nav-list]"),g("article.article-content"),(function(){for(var e=[],t=g("#article-nav-list a"),a=0;a<t.length;a++){var n=g(t[a]).attr("href");e.push(n)}e.length&&(g(g("#article-nav-list a")[0]).removeClass("text-secondary").addClass("text-primary"),window.addEventListener("scroll",(function(){return te(e)})))})),w({type:"global/saveTitle",payload:{title:ae.title}}),w({type:"global/pushPageUser",payload:{pathName:window.location.pathname,users:[ae.user]}}),w({type:"global/saveHeadOptions",payload:{keywords:ue,description:me}});var n=document.querySelector(".article.fmt");if(ne.render(n),g(window).resize((function(){g(document.body).width()<576&&g("#first-ad").removeClass("data-fix")})),g(document.body).width()<576)return void g("article.article img").change((function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),i="";if(a=n||a,a){var c=a.indexOf("?");c>0&&(i=a.substring(c),a=a.substring(0,c)),a.match(/^\/img\//)&&!a.match(/\/view$/)&&(a=a+"/view"+i,t.setAttribute(n?"data-src":"src",a),t.setAttribute("data-src",a))}}))}),(function(e){e.each((function(e,t){var a=t.getAttribute("src"),n=t.getAttribute("data-src"),i="";if(a=n||a,a){var c=a.indexOf("?");c>0&&(i=a.substring(c),a=a.substring(0,c)),a.match(/^\/img\//)&&a.match(/\/view$/)&&(a=a.substring(0,a.length-5)+i,t.setAttribute(n?"data-src":"src",a))}}))}));var i=g("article.article img");if((null===i||void 0===i?void 0:i.length)>0){var c,r=i[0].getAttribute("src"),l=i[0].getAttribute("data-src");r=l||r,!r||null!==(c=r)&&void 0!==c&&c.includes("http")||(r="".concat(window.location.origin).concat(r)),ke(r||"")}}Ze(),ae.id&&w({type:"articleDetail/getRelated",payload:V})}),[ae.id]);var Ge=function(){var e,t,a,n,i,c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=(null===(e=document.getElementById("author"))||void 0===e?void 0:e.clientHeight)||0,l=(null===(t=document.getElementById("first-ad"))||void 0===t?void 0:t.clientHeight)||0,o=(null===(a=document.getElementById("cataLog"))||void 0===a?void 0:a.clientHeight)||0,s=(null===(n=document.getElementById("gridAd"))||void 0===n?void 0:n.clientHeight)||0,d=(null===(i=document.getElementById("second-ad"))||void 0===i?void 0:i.clientHeight)||0;Be(c>r+l+o+s+d+120)},Ze=function(){var e,t=(null===(e=document.getElementById("second-ad"))||void 0===e?void 0:e.getBoundingClientRect().bottom)||0,a=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;a&&t<0&&window.scrollTo(0,a+1)},Qe=Object(E["findIndex"])(null===ae||void 0===ae?void 0:ae.tags,{name:"\u62db\u8058"})>-1||Object(E["findIndex"])(null===ae||void 0===ae?void 0:ae.tags,{name:"\u9177\u5de5\u4f5c"})>-1;return y[V]?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-none d-xl-flex justify-content-center"},s.a.createElement(B["a"],{name:"2"})),s.a.createElement(d["a"],{className:"article-content pt-3 pt-sm-0"},s.a.createElement(q["a"],{className:"mx-4 mx-md-0 d-none d-sm-block",data:Qe?[{name:"\u62db\u8058",url:"/jobs"},{name:"\u62db\u8058\u8be6\u60c5",url:"###"}]:[{name:"\u4e13\u680f",url:"/blogs"},{name:null!==de&&void 0!==de&&de.id?de.name:null===oe||void 0===oe?void 0:oe.name,url:null!==de&&void 0!==de&&de.id?de.url:"".concat(null===oe||void 0===oe?void 0:oe.url,"/blogs")},{name:"\u6587\u7ae0\u8be6\u60c5",url:"###"}]}),s.a.createElement(m["a"],null,s.a.createElement(u["a"],{className:"col-xl w-0",xs:12},(null===ae||void 0===ae?void 0:ae.status_key)&&(null===ce||void 0===ce?void 0:ce.reason)&&s.a.createElement(k,{id:V,extra:ce,sessionUser:N,status:null===ae||void 0===ae?void 0:ae.status_key}),"deleted"===(null===ae||void 0===ae?void 0:ae.status_key)&&!(null!==ce&&void 0!==ce&&ce.reason)&&s.a.createElement(v["a"],{className:"mb-3",variant:"warning"},s.a.createElement("span",null,"\u8fd9\u7bc7\u6587\u7ae0\u5df2\u88ab\u5220\u9664")),s.a.createElement(H["a"],{id:null===ae||void 0===ae?void 0:ae.id,actionData:Object(i["a"])({},O[V]),title:null===ae||void 0===ae?void 0:ae.title,showShare:he,banner:(null===ae||void 0===ae?void 0:ae.cover)||we,isAuthor:pe,source:"article"}),s.a.createElement(M["a"],{detail:y[V],articleHtml:e.articleHtml,actionData:O[V],actions:ie,initPage:$e,imageUrl:ae.cover,isEditor:be,isAuthor:pe,memberActions:re,lang:W,payInfo:ve,isBaiduOxApp:I}),s.a.createElement("div",{className:"d-block d-xl-none my-4"},(null===ae||void 0===ae||null===(l=ae.user)||void 0===l?void 0:l.url)&&s.a.createElement(Y["a"],{user:null===ae||void 0===ae?void 0:ae.user})),s.a.createElement(F["default"],{id:V,event_object:_e,user:ae.user,isFetchComments:ae.comments>0,memberActions:re}),Object(E["isEmpty"])(N)&&s.a.createElement(R["n"],null),s.a.createElement(D,{list:x})),s.a.createElement(u["a"],{xs:12,className:"col-xl-auto w-xl-300 d-none d-xl-block p-0 right-side"},s.a.createElement(b.a,{top:82,innerZ:5,bottomBoundary:".article-content",enabled:Le},s.a.createElement("div",{className:"right-block",id:"author",ref:He},(null===ae||void 0===ae||null===(f=ae.user)||void 0===f?void 0:f.url)&&s.a.createElement(Y["a"],{user:null===ae||void 0===ae?void 0:ae.user}))),s.a.createElement(b.a,{enabled:Le&&!Ae,top:Me+82+20,innerZ:4,bottomBoundary:".article-content"},s.a.createElement("div",{className:"right-block",id:"first-ad",ref:Pe},s.a.createElement("div",{className:"card border-0 overflow-hidden d-none d-xl-flex justify-content-center align-items-center float-ads"},s.a.createElement(B["a"],{name:"1"})))),s.a.createElement(b.a,{top:Me+82+20,innerZ:3,enabled:Le&&Ae,bottomBoundary:".article-content"},s.a.createElement("div",{id:"cataLog",className:"right-block",ref:We},s.a.createElement(J,{isFixed:Ae,setFixedState:function(e){De(e),Ze()}}))),s.a.createElement("div",{id:"gridAd",className:"right-block"},s.a.createElement(L["a"],null)),s.a.createElement(b.a,{enabled:Le&&!Ae,top:Me+(Ae?Ke:Ve)+82+20+20,bottomBoundary:".article-content",innerZ:2},s.a.createElement("div",{id:"second-ad"},s.a.createElement(B["a"],{name:"31"}))))),s.a.createElement(T["a"],null),s.a.createElement("div",{className:"d-block d-sm-none fix-bottom-action-wrap"},s.a.createElement(H["a"],{id:null===ae||void 0===ae?void 0:ae.id,actionData:Object(i["a"])({},O[V]),title:null===ae||void 0===ae?void 0:ae.title,showShare:he,banner:(null===ae||void 0===ae?void 0:ae.cover)||we,isAuthor:pe,source:"article",mode:"fixBottom"})))):null};ie.articleHtml="",ie.getInitialProps=Object(ae["a"])({requireState:["articleDetail.artDetail"]},function(){var e=Object(n["a"])(l.a.mark((function e(t){var a,n,c,r,o,s,d,m,u,v,f,b,p,g,h,y;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.store,n=t.match,c=t.isServer,r=t.serverData,o=void 0===r?{}:r,c){e.next=3;break}return e.abrupt("return");case 3:return s=n,d=s.params,m=d.aid,u=d.lang,v=void 0===u?"":u,f=new K["U"](o),e.next=7,Promise.allSettled([a.dispatch({type:"articleDetail/getArtDetail",payload:{aid:m,lang:v,isServerLoaded:!0},api:f})]);case 7:if(b=a.getState().articleDetail.artDetail,Object(E["isEmpty"])(b[m])){e.next=18;break}if(p=b[m],g=p.article,h=p.keywords,y=p.description,g){e.next=14;break}throw new Error("error_article_data:".concat(m,"\n").concat(JSON.stringify(a.getState())));case 14:ie.articleHtml=null===g||void 0===g?void 0:g.parsed_text,a.dispatch({type:"global/saveTitle",payload:{title:null===g||void 0===g?void 0:g.title}}),a.dispatch({type:"articleDetail/saveArticleHtml",payload:{id:m,parsed_text:""}});case 17:a.dispatch({type:"global/saveHeadOptions",payload:{keywords:h,description:y}});case 18:return e.abrupt("return",Object(i["a"])({},a.getState()));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());t["default"]=Object(y["b"])((function(e){var t=e.articleDetail,a=e.action,n=e.global;return Object(i["a"])(Object(i["a"])({},t),{},{action:a,sessionUser:n.sessionUser,isBaiduOxApp:n.isBaiduOxApp})}))(ie)},paDM:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("6xyR"),r=(a("nWVH"),a("kwfb")),l=function(){return i.a.createElement(c["a"],null,i.a.createElement(c["a"].Header,{className:"bg-white border-0"},i.a.createElement("strong",null,"\u5ba3\u4f20\u680f")),i.a.createElement(c["a"].Body,null,i.a.createElement("div",{className:"mb-3"},i.a.createElement(r["a"],{name:"7"})),i.a.createElement("div",{className:"mb-3"},i.a.createElement(r["a"],{name:"9"})),i.a.createElement("div",null,i.a.createElement(r["a"],{name:"10"}))))};t["a"]=i.a.memo(l)},"wFk/":function(e,t,a){"use strict";var n=a("k1fw"),i=a("oBTY"),c=a("9og8"),r=a("tJVT"),l=a("WmNS"),o=a.n(l),s=a("q1tI"),d=a.n(s),m=a("HRRZ"),u=a("QojX"),v=a("9kvl"),f=a("yUhH"),b=a("7U2o"),p=a("Dp36"),g=function(e){var t=e.id,a=e.setBookmarkedState,l=e.isShow,v=e.setShowStatus,g=e.sessionUser,E=e.source,h=void 0===E?"":E,y=e.isBookmarked,O=void 0!==y&&y,j=Object(s["useState"])(!1),w=Object(r["a"])(j,2),k=w[0],N=w[1],x=Object(s["useState"])([]),_=Object(r["a"])(x,2),S=_[0],I=_[1],C=Object(s["useState"])([]),A=Object(r["a"])(C,2),D=A[0],R=A[1],T=Object(s["useState"])({value:"",isInvalid:!1,errorMsg:""}),L=Object(r["a"])(T,2),B=L[0],q=L[1],F=Object(s["useState"])(""),M=Object(r["a"])(F,2),H=M[0],U=M[1],z=Object(s["useState"])(1),V=Object(r["a"])(z,2),P=V[0],J=V[1];Object(s["useEffect"])((function(){g&&l&&Y()}),[l]);var Y=function(){var e=Object(c["a"])(o.a.mark((function e(){var a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["x"])({objectId:t});case 2:a=e.sent,a&&a.rows&&(I(a.rows),R(a.rows.filter((function(e){return e.is_bookmarked})).map((function(e){return e.id}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){v(!1),N(!1),q({value:"",isInvalid:!1,errorMsg:""}),U(""),J(1)},W=function(e){e.is_bookmarked?R(D.filter((function(t){return t!==e.id}))):R([].concat(Object(i["a"])(D),[e.id])),I(S.map((function(t){return e.id===t.id&&(t.is_bookmarked=e.is_bookmarked?0:1),t})))},$=function(){var e=Object(c["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!k){e.next=10;break}if(B.value){e.next=4;break}return q(Object(n["a"])(Object(n["a"])({},B),{},{isInvalid:!0,errorMsg:"\u540d\u79f0\u5fc5\u586b"})),e.abrupt("return");case 4:return e.next=6,Object(p["g"])({name:B.value,description:H,is_private:P})["catch"]((function(e){null!==e&&void 0!==e&&e.isError&&q(Object(n["a"])(Object(n["a"])({},B),{},{isInvalid:!0,errorMsg:e.name}))}));case 6:Y(),N(!k),e.next=13;break;case 10:Object(p["u"])({type:h,id:t,is_bookmark:0===D.length?0:1,archive_ids:D})["catch"]((function(){a(!1)})),O!==Boolean(D.length)&&a(!(0===D.length)),v(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(b["a"],{scrollable:!0,show:l,title:k?"\u521b\u5efa\u6536\u85cf\u5939":"\u6536\u85cf",onCancel:K,onOk:$},k?d.a.createElement(f["a"],{className:"bookmarklist-form",id:"bookmarkArchives",onSubmit:$},d.a.createElement(m["a"],{controlId:"bookmark.archiveName",className:"mb-3"},d.a.createElement(u["a"].Label,{className:"required"},"\u540d\u79f0")," ",d.a.createElement(u["a"].Control,{type:"text",className:"form-control",value:B.value,onChange:function(e){return q(Object(n["a"])(Object(n["a"])({},B),{},{value:e.target.value}))},placeholder:"\u6700\u591a\u8f93\u516532\u4e2a\u5b57",maxLength:32,autoComplete:"off",required:!0,isInvalid:B.isInvalid}),d.a.createElement(u["a"].Control.Feedback,{type:"invalid"},B.errorMsg)),d.a.createElement(m["a"],{controlId:"bookmark.description",className:"mb-3"},d.a.createElement(u["a"].Label,null,"\u63cf\u8ff0")," ",d.a.createElement(u["a"].Control,{as:"textarea",value:H,onChange:function(e){return U(e.target.value)},placeholder:"\u6700\u591a\u8f93\u5165256\u4e2a\u5b57",maxLength:256})),d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",value:"1",onChange:function(){return J(1)},checked:1===P,id:"bookmark-private"}),d.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-private"},"\u79c1\u5bc6\uff1a"),d.a.createElement("span",{className:"text-secondary"},"\u4ec5\u81ea\u5df1\u53ef\u89c1")),d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"isPrivate",onChange:function(){return J(0)},checked:0===P,id:"bookmark-public"}),d.a.createElement("label",{className:"form-check-label",htmlFor:"bookmark-public"},"\u516c\u5f00\uff1a"),d.a.createElement("span",{className:"text-secondary"},"\u516c\u5f00\u540e\u4e0d\u53ef\u518d\u8bbe\u7f6e\u4e3a\u79c1\u5bc6"))):d.a.createElement(f["a"],{onSubmit:$},d.a.createElement("div",{className:"mb-3"},d.a.createElement("label",{className:"form-title"},"\u6dfb\u52a0\u5230\u6536\u85cf\u5939\uff1a"),null===S||void 0===S?void 0:S.map((function(e){return d.a.createElement("div",{className:"form-check mb-2",key:e.id},d.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"bookmarkItem[]",id:e.id,value:e.id,onChange:function(){return W(e)},checked:Boolean(e.is_bookmarked)}),d.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.name,Boolean(e.is_private)&&d.a.createElement("span",{className:"text-secondary"},"\uff08\u79c1\u5bc6\uff09")))})),d.a.createElement("button",{className:"btn btn-link new-bookmark p-0",onClick:function(){return N(!0)}},"+ \u521b\u5efa\u6536\u85cf\u5939"))))};t["a"]=Object(v["b"])((function(e){var t=e.global;return{sessionUser:t.sessionUser}}))(d.a.memo(g))},wroQ:function(e,t,a){},xQMv:function(e,t,a){e.exports=a.p+"static/bg-219.7a1acf4f.svg"}}]);