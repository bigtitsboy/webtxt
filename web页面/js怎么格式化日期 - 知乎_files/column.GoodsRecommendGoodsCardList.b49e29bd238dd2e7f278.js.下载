(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1554:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return U}));var c=a(24),n=a.n(c),o=a(1),s=a.n(o),i=a(7),l=a.n(i);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.trimZero,c=void 0!==a&&a,n=String(e).padStart(2,"0").slice(-2);return c&&"00"===n?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(n)}var d=a(2),u=a.n(d),f=a(10),m=a(597),b=a(34),v=a.n(b),O=a(3);var j=function(e){var t=e.width,a=void 0===t?"10":t,c=e.height,n=void 0===c?"10":c;return Object(O.f)("svg",v()({width:a,height:n,viewBox:"0 0 10 10",fill:"none"},e),Object(O.f)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5C0 2.23858 2.23858 0 5 0ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1ZM5 2C5.27614 2 5.5 2.22386 5.5 2.5V4.21902C5.5 4.54533 5.65921 4.85112 5.92654 5.03825L7.37712 6.05365C7.60334 6.21201 7.65836 6.52378 7.5 6.75C7.34164 6.97622 7.02988 7.03124 6.80365 6.87288L4.92654 5.5589C4.65921 5.37178 4.5 5.06599 4.5 4.73967V2.5C4.5 2.22386 4.72386 2 5 2Z",fill:"white"}))},p=a(357),g="GoodsItemCardPromo",C=function(e){var t=e.countdown,a=Object(o.useState)(t),c=n()(a,2),i=c[0],l=c[1],r=Object(o.useRef)();Object(o.useEffect)((function(){return i<=0?(clearInterval(r.current),void l(0)):(r.current=setInterval((function(){l(i-1)}),1e3),function(){return clearInterval(r.current)})}),[i]);var d=Object(p.b)(i),u=d.d,f=d.h,m=d.m,b=d.s,v="".concat(u?u+"天":""," ").concat(f,":").concat(m,":").concat(b);return Object(O.f)("div",{className:g},Object(O.f)("div",{className:"".concat(g,"-left")},Object(O.f)(j,{className:"".concat(g,"-icon")}),Object(O.f)("span",null,"限时秒杀")),Object(O.f)("div",{className:"".concat(g,"-right")},i?Object(O.f)(s.a.Fragment,null,Object(O.f)("span",null,"距结束还剩 "),Object(O.f)("span",{className:"".concat(g,"-rightText")},v)):Object(O.f)("span",null,"活动已结束")))},h=a(465),k=a(19),N=function(e){var t=e.className,a=e.style,c=e.id,n=e.skuId,s=e.imgUrl,i=e.title,d=e.price,u=void 0===d?0:d,b=e.underlinePrice,v=void 0===b?0:b,j=e.source,p=e.productType,g=e.subtitle,N=e.tags,y=void 0===N?[]:N,I=e.promoInfo,w=void 0===I?{}:I,S=e.showBottomLine,G=void 0!==S&&S,T=e.zaData,F=void 0===T?{}:T,_=e.onClick,L=Number((null==w?void 0:w.countdown)||0)>0;Object(o.useEffect)((function(){(null==F?void 0:F.showId)&&f.a.trackCardShow(null,{id:null==F?void 0:F.showId,path:[{module_name:"".concat(c,"_").concat(n,"_").concat(j,"_").concat(p)}]})}),[]);return Object(O.f)("div",{className:l()("GoodsItemCard",{"GoodsItemCard-promo":L},t),style:a,onClick:function(){(null==F?void 0:F.clickId)&&f.a.trackEvent(null,{id:null==F?void 0:F.clickId,action:"OpenUrl",path:[{module_name:"".concat(c,"_").concat(n,"_").concat(j,"_").concat(p)}]}),"function"==typeof _&&_()}},L&&Object(O.f)(C,{countdown:(null==w?void 0:w.countdown)||0}),Object(O.f)("div",{className:"GoodsItemCard-main"},Object(O.f)("div",{className:"GoodsItemCard-left"},Object(O.f)("div",{className:"GoodsItemCard-imgLayer"}),Object(O.f)("img",{className:"GoodsItemCard-imgUrl",src:s,alt:""})),Object(O.f)("div",{className:"GoodsItemCard-right"},Object(O.f)("div",{className:"GoodsItemCard-title"},i),!!y.length&&Object(O.f)(h.a,{className:"GoodsItemCard-tags",tags:Object(k.camelizeKeys)(y)}),Object(O.f)("div",{className:"GoodsItemCard-footer"},Object(O.f)("div",{className:"GoodsItemCard-priceBox"},Object(O.f)("span",{className:"GoodsItemCard-price"},"¥".concat(r(u))),!!v&&Object(O.f)("span",{className:"GoodsItemCard-underlinePrice"},"¥".concat(r(v)))),Object(O.f)("div",{className:"GoodsItemCard-source"},g,Object(O.f)(m.a,{size:20,center:!0})))),Object(O.f)("div",{className:"GoodsItemCard-bottomLine",style:{display:G?"block":"none"}})))};N.prototype={className:u.a.string,style:u.a.object,id:u.a.string,skuId:u.a.string,imgUrl:u.a.string.isRequired,title:u.a.string.isRequired,subtitle:u.a.string,price:u.a.number,source:u.a.string.isRequired,showBottomLine:u.a.bool,tags:u.a.array,zaData:u.a.object,promoInfo:u.a.object,onClick:u.a.func};var y=N,I=a(735),w=a(42),S=a.n(w),G=function(){return Object(O.f)(s.a.Fragment,null)},T={SkeletonH01:function(e){var t=e.lineClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,a=e.blockClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:a}),Object(O.f)("div",null,Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,a=e.blockClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:a}),Object(O.f)("div",null,Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,a=e.blockClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",null,Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t})),Object(O.f)("div",{className:a}))},SkeletonC03:function(e){var t=e.lineClass,a=e.blockClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:a}),Object(O.f)("div",{style:{width:"100%"}},Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t})))},SkeletonC04:function(e){var t=e.lineClass,a=e.blockClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:"".concat(a,"-1")}),Object(O.f)("div",{className:a}),Object(O.f)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},Object(O.f)("div",{className:t}),Object(O.f)("div",{className:t})))},SkeletonI01:function(e){var t=e.blockClass;return Object(O.f)(s.a.Fragment,null,Object(O.f)("div",{className:t}))},SkeletonSpacing:G,SkeletonFill:G},F=s.a.memo((function(e){var t,a=e.variant,c=void 0===a?"H01":a,n=e.height,o=e.width,s=void 0===o?"auto":o,i=e.animation,r=void 0===i?"ease-in":i,d="skeleton__line--".concat(c.toLowerCase()),u="skeleton--".concat(c.toLowerCase()),f=l()(S()({skeleton__block:!0},"skeleton__block--".concat(c.toLowerCase()),!0)),m=l()(S()({skeleton__line:!0},d,!0)),b=l()((t={skeleton:!0},S()(t,u,!0),S()(t,"skeleton--ease-in","ease-in"===r),t)),v={width:s};n&&["Spacing","Fill"].includes(c)&&(v.height="number"==typeof n?"".concat(n,"px"):n);var j=T["Skeleton".concat(c)];return Object(O.f)("section",{className:b,style:v},Object(O.f)(j,{variant:c,lineClass:m,blockClass:f}))}));F.propTypes={variant:u.a.string,height:u.a.oneOfType([u.a.string,u.a.number]),width:u.a.oneOfType([u.a.string,u.a.number]),animation:u.a.oneOfType([u.a.bool,u.a.string])};var _=F;var L=s.a.memo((function(e){var t=e.content,a=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),a=n()(t,2),c=a[0],o=a[1];return["Spacing","Fill"].includes(c)?{type:c,height:+o}:{type:c,count:+o||1}}))}(void 0===t?"T01":t);return Object(O.f)(s.a.Fragment,null,a.map((function(e,t){var a=e.type,c=e.count,n=e.height;return c?Array.from({length:c}).map((function(e,c){return Object(O.f)(_,{variant:a,key:"".concat(t,"-").concat(c)})})):Object(O.f)(_,{variant:a,height:n,key:"".concat(t,"-").concat(n)})})))}));L.prototype={content:Object(d.oneOfType)([Object(d.arrayOf)(d.string),d.string])};var z=L,B=a(17),P=a(307),M=a(693),R=function(e){var t=e.className,a=e.style,c=e.showModal,i=void 0===c||c,r=e.withModal,d=void 0===r||r,u=e.modalTitle,m=void 0===u?"":u,b=e.id,v=e.url,j=void 0===v?"":v,p=e.fetcherOptions,g=void 0===p?{}:p,C=e.scenes,h=void 0===C?0:C,N=e.onClose,w=Object(M.a)(),S=Object(o.useState)(0),G=n()(S,2),T=G[0],F=G[1],_=Object(o.useState)(!1),L=n()(_,2),R=L[0],U=L[1],x=Object(o.useState)([]),E=n()(x,2),D=E[0],K=E[1],Z=Object(o.useState)([]),q=n()(Z,2),A=q[0],H=q[1],J=Object(o.useState)(!1),V=n()(J,2),Q=V[0],W=V[1];Object(o.useEffect)((function(){f.a.trackCardShow(null,{id:10331,path:[{module_name:b}]})}),[]),Object(o.useEffect)((function(){U(!0);var e=j||"/api/v4/mcn/linkcard/".concat(b,"/goods?scenes=").concat(h);Object(P.a)(e,g).then((function(e){var t=Object(k.camelizeKeys)((null==e?void 0:e.data)||{}),a=t.goods,c=t.similarGoods;K(a||[]),H(c||[]),W(!1)})).catch((function(){W(!0)})).finally((function(){setTimeout((function(){U(!1)}),500)}))}),[b,T]);var X=Object(O.f)(B.e,{zaBlock:"goodsRecommend_polymericPopupPage",zaType:"Page",as:"div",className:"GoodsCardList-container"},R?Object(O.f)(s.a.Fragment,null,Object(O.f)(z,{content:"C03,Spacing-26,C03",height:72})):Q?Object(O.f)("div",{className:"GoodsCardList-error"},Object(O.f)("div",{className:"GoodsCardList-errorDesc"},"Oops~ 出错了"),Object(O.f)("div",{className:"GoodsCardList-errorBtn",onClick:function(){F(T+1)}},"刷新重试")):Object(O.f)(s.a.Fragment,null,[D,A].map((function(e,t){return e.length?Object(O.f)(o.Fragment,{key:t},e.map((function(e,a){var c=Object(k.camelizeKeys)(e),n=c.id,s=c.goods,i=c.tags,l=c.promoInfo,r=c.attachedInfoBytes,d=s||{},u=d.skuId,f=d.title,m=d.subtitle,b=d.goodsImg,v=d.goodsUrl,j=d.price,p=d.source,g=d.productType,C=j||{},N=C.price,I=C.underlinePrice;return Object(O.f)(o.Fragment,{key:"".concat(u,"-").concat(t,"-").concat(a)},1===t&&0===a&&Object(O.f)("div",{className:"GoodsCardList-similarText"},"相似商品"),Object(O.f)(B.b,{content:{type:"GoodsRecommend",id:String(u),token:String(n)},extra:{attachedInfoBytes:r,link:{url:null==v?void 0:v.url}}},Object(O.f)(B.e,{shouldTrackClick:!0,className:"GoodsCardList-listItem",zaBlock:"goodsRecommend_polymericPopupCard",zaType:"Card",zaAction:"OpenUrl",zaEventType:"Click"},Object(O.f)(y,{id:n,skuId:u,title:f,imgUrl:null==b?void 0:b.imgUrl,price:N,underlinePrice:I,source:p,subtitle:m,productType:g,showBottomLine:!1,zaData:{showId:10371,clickId:10372},tags:i,promoInfo:l,onClick:function(){return function(e){var t=Object(k.camelizeKeys)(e),a=t.id,c=t.goods||{},n=c.goodsUrl,o=c.source,s=n.url,i=n.iosSchema,l=n.androidSchema;w({id:a,url:s,source:o,scenes:h,appSchemaIos:i,appSchemaAndroid:l})}(e)}}))))}))):null}))));return d?Object(O.f)(I.a,{className:l()("GoodsCardList",t),style:a,size:"large",title:m,onClose:N},i&&X):X};R.prototype={className:u.a.string,style:u.a.object,showModal:u.a.bool,withModal:u.a.bool,modalTitle:u.a.string,id:u.a.string,url:u.a.string,fetcherOptions:u.a.object,scenes:u.a.number,onClose:u.a.func,onSelectCard:u.a.func};var U=R}}]);
//# sourceMappingURL=column.GoodsRecommendGoodsCardList.b49e29bd238dd2e7f278.js.map