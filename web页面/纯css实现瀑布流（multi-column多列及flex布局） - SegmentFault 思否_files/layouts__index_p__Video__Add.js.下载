(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"95Qr":function(e,a,t){"use strict";var n=t("tJVT"),l=t("q1tI"),r=t.n(l),c=t("97+O"),o=t("jDKy"),s=t("8+cs"),i=(t("JsPT"),function(e){var a=e.defaultValue,t=void 0===a?"":a,i=e.className,m=void 0===i?"":i,d=e.menukey,u=void 0===d?"":d,v=Object(l["useState"])(t),f=Object(n["a"])(v,2),g=f[0],p=f[1],h=Object(l["useState"])(0),b=Object(n["a"])(h,2),E=b[0],w=b[1],N=Object(l["useState"])("bing"),k=Object(n["a"])(N,2),y=k[0],j=k[1],O=function(){if(g.length>0){var e="";s["e"].forEach((function(a){a.site===y&&(e=(null===a||void 0===a?void 0:a.url)||"")})),"sf"===y?window.location.href="/search?q=".concat(g):window.open("".concat(e).concat(g))}},x=function(){g&&w((function(e){return e+1}));var e=localStorage.getItem("searchSite")||"bing";j(e)};return r.a.createElement(c["a"],{id:"header-tsearch-toogle",className:m},r.a.createElement(c["a"].Toggle,{as:"div",className:"position-relative"},r.a.createElement("div",{className:"icon-search",onClick:O},r.a.createElement("i",{className:"far fa-magnifying-glass text-secondary"})),r.a.createElement(o["a"],{type:"text",name:"q",placeholder:"\u641c\u7d22\u5173\u952e\u5b57","aria-label":"\u641c\u7d22",value:g,onClick:function(){w(0)},onChange:function(e){p(e.target.value),e.target.value.length<=0?w(0):w((function(e){return e+1}))},onFocus:x,onKeyDown:function(e){13===e.keyCode&&g.length>0&&O()},className:"me-sm-2 w-100 input",autoComplete:"off"})),r.a.createElement(c["a"].Menu,{className:"w-100",key:u||E,show:E>0,renderOnMount:!0},s["e"].map((function(e){return r.a.createElement(c["a"].Item,{as:"a",key:e.site,href:"".concat(e.url).concat(g),target:"sf"===e.site?"_self":"_blank",active:y===e.site,onClick:function(){localStorage.setItem("searchSite",e.site),j(e.site)}},r.a.createElement("span",{className:"search-name"},e.site===y?"\u2713":""),e.name)}))))});a["a"]=r.a.memo(i)},JsPT:function(e,a,t){},UFbl:function(e,a,t){e.exports={"tip-circle":"tip-circle___3bQrI","medal-circle":"medal-circle___3y5mn","sf-header":"sf-header___2cUz5","sf-header-logo":"sf-header-logo___3_xEt","self-nav-toogle":"self-nav-toogle___jVdh3","bg-warning":"bg-warning___1d-yx",dropdown:"dropdown___3SZe6","hover-down":"hover-down___3UKu6","dropdown-menu":"dropdown-menu___3NwcA","sflex-center":"sflex-center___2eThn","dropdown-toggle":"dropdown-toggle___3yzC1","header-search":"header-search___28AtS","title-wrap":"title-wrap___w3dqY","review-dot":"review-dot___2nOVA"}},XHHP:function(e,a,t){e.exports=t.p+"static/logo-b.d865fc97.svg"},Z6Z6:function(e,a,t){e.exports=t.p+"static/sf-icon-small.82a498f6.svg"},ruvs:function(e,a,t){"use strict";var n=t("9og8"),l=t("tJVT"),r=t("WmNS"),c=t.n(r),o=t("q1tI"),s=t.n(o),i=t("6ctO"),m=t("7vrA"),d=t("65eO"),u=t("97+O"),v=t("+YzT"),f=t("GWEY"),g=t("Ty5D"),p=t("9kvl"),h=t("hS4W"),b=t.n(h),E=t("8+cs"),w=t("oBTY"),N=t("6xyR"),k=t("sjrs"),y=t("RotF"),j=t.n(y),O=t("LvDl"),x=t("UFbl"),_=t.n(x),S=function(){return s.a.createElement("div",{className:_.a["sflex-center"]+" message-loading",style:{height:"100%"}},s.a.createElement("div",{className:"spinner-border text-secondary",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))},C=S,I=t("NAXS"),D=function(e){var a,t,n,r,c,i,m=e.data,d=Object(o["useState"])(null===m||void 0===m?void 0:m.viewed),u=Object(l["a"])(d,2),v=u[0],f=u[1];return s.a.createElement(I["a"],{as:"li",action:!0,className:"d-flex align-items-center ".concat(v?"":"bg-warning"," py-2 border-0"),onClick:function(){window.open(null===m||void 0===m?void 0:m.url),m.viewed||f(1)},style:{cursor:"pointer"}},s.a.createElement("img",{src:(null===m||void 0===m||null===(a=m.target_user)||void 0===a?void 0:a.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"",className:"rounded-circle me-2",width:"32",height:"32"}),s.a.createElement("div",{className:"media-body"},s.a.createElement("a",{href:"javascript:;"===(null===m||void 0===m||null===(t=m.target_user)||void 0===t?void 0:t.url)?"#!":null===m||void 0===m||null===(n=m.target_user)||void 0===n?void 0:n.url,target:"_blank",className:"d-inline-block"},null===m||void 0===m||null===(r=m.target_user)||void 0===r?void 0:r.name),s.a.createElement("div",{className:"text-truncate-1 text-secondary my-0",style:{maxWidth:"260px"},dangerouslySetInnerHTML:{__html:(null===m||void 0===m||null===(c=m.last_message)||void 0===c||null===(i=c.content)||void 0===i?void 0:i.content)||""}})))},T=s.a.memo(D),U=t("Dp36"),A=function(e){var a=e.visible,t=void 0!==a&&a,r=Object(o["useState"])([]),i=Object(l["a"])(r,2),m=i[0],d=i[1],u=Object(o["useState"])(!0),v=Object(l["a"])(u,2),f=v[0],g=v[1],h=Object(o["useState"])(!0),b=Object(l["a"])(h,2),E=b[0],y=b[1],x=Object(o["useState"])(1),_=Object(l["a"])(x,2),S=_[0],I=_[1],D=Object(O["debounce"])((function(){E&&F(S)}),400),A=Object(p["f"])();Object(o["useEffect"])((function(){t?(A({type:"global/saveNoticeNum",payload:{letterNum:0}}),F(1)):(d([]),I(1),g(!0),y(!0))}),[t]);var F=function(e){Object(U["Pd"])(e,!1).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.rows)&&void 0!==a&&a.length&&d([].concat(Object(w["a"])(m),Object(w["a"])(e.rows))),I((function(e){return e+1})),y(e.page<e.total_page),g(!1)}))["catch"]((function(){y(!1)}))},z=function(){var e=Object(n["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(U["Qd"])();case 2:m.map((function(e){e.viewed=1})),d(m);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){return m.map((function(e,a){return s.a.createElement(T,{data:e,key:"".concat(e.id).concat(a)})}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(N["a"],{className:"border-0 letterBox header-box",style:{minWidth:"22rem"}},s.a.createElement(N["a"].Body,{className:"letter p-0 font-size-14"},s.a.createElement(k["a"],{as:"ul",style:{height:"360px",overflowY:"auto"}},s.a.createElement(j.a,{className:"content-list-wrap",pageStart:0,initialLoad:!1,loadMore:D,hasMore:E,useWindow:!1},(null===m||void 0===m?void 0:m.length)>0&&M(),E&&!f?s.a.createElement("div",{className:"text-center py-3"},"\u52a0\u8f7d\u4e2d..."):""),f&&s.a.createElement(C,null))),s.a.createElement(N["a"].Footer,{className:"bg-transparent d-flex justify-content-between"},s.a.createElement("a",{href:"#!",className:"text-secondary font-size-14 all-view",onClick:function(e){e.preventDefault(),z()}},s.a.createElement("i",{className:"me-1 far fa-check-double"}),"\u5168\u90e8\u6807\u8bb0\u4e3a\u5df2\u8bfb"),s.a.createElement("a",{href:"/user/messages",className:"text-secondary font-size-14"},"\u67e5\u770b\u5168\u90e8"))))},F=A,z=t("jrin"),M=t("k1fw"),B=t("pJDg"),L=t("cWnB"),q=t("EVdn"),P=function(e){var a,t,n,r,c=e.data,i=e.readAll,m=Object(o["useState"])(null===c||void 0===c?void 0:c.viewed),d=Object(l["a"])(m,2),u=d[0],v=d[1];return s.a.createElement(I["a"],{as:"li",action:!0,className:"".concat(u||i?"":"bg-warning"," py-2 border-0"),onClick:function(){c.viewed||v(1)}},s.a.createElement("a",{href:(null===c||void 0===c||null===(a=c.trigger_user)||void 0===a?void 0:a[0].url)+"?"+(null===c||void 0===c?void 0:c.url.split("?")[1]),target:"_blank"},s.a.createElement("img",{src:(null===c||void 0===c||null===(t=c.trigger_user)||void 0===t?void 0:t[0].avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",className:"rounded-circle me-2",width:"32px",height:"32"})),s.a.createElement("div",{className:"media-body d-inline"},s.a.createElement("a",{href:(null===c||void 0===c||null===(n=c.trigger_user)||void 0===n?void 0:n[0].url)+"?"+(null===c||void 0===c?void 0:c.url.split("?")[1]),target:"_blank"},null===c||void 0===c||null===(r=c.trigger_user)||void 0===r?void 0:r[0].name)," ",s.a.createElement("span",{className:"text-muted"},"\u5173\u6ce8\u4e86\u4f60")))},W=s.a.memo(P),H=function(e){var a,t,n,l,r,c,o,i,m,d=e.data,u=e.readAll,v=function(e){return Number(e)?Number(e)>0?"bg-success":"bg-danger":"bg-info text-dark"},f=function(e){q(e.currentTarget).parents(".noticeDetailParent").removeClass("bg-warning")};return s.a.createElement(I["a"],{as:"li",action:!0,className:"rankItemParent ".concat(null!==d&&void 0!==d&&d.viewed||u?"":"bg-warning"," py-2 border-0")},((null===d||void 0===d||null===(a=d.voted)||void 0===a?void 0:a.rank)>0||(null===d||void 0===d||null===(t=d.voted)||void 0===t?void 0:t.rank)<0)&&s.a.createElement("span",{className:"badge rounded-pill float-start ".concat(v(null===d||void 0===d||null===(n=d.voted)||void 0===n?void 0:n.rank))},"".concat((null===d||void 0===d||null===(l=d.voted)||void 0===l?void 0:l.rank)>0?"+":"").concat(null===d||void 0===d||null===(r=d.voted)||void 0===r?void 0:r.rank)),"\u2661"===(null===d||void 0===d||null===(c=d.voted)||void 0===c?void 0:c.rank)&&s.a.createElement("span",{className:"badge rounded-pill float-start ".concat(v(null===d||void 0===d||null===(o=d.voted)||void 0===o?void 0:o.rank))},"".concat((null===d||void 0===d||null===(i=d.voted)||void 0===i?void 0:i.rank)>0?"+":"").concat(null===d||void 0===d||null===(m=d.voted)||void 0===m?void 0:m.rank)),s.a.createElement("div",{className:"ps-5"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:d.sentence},className:"rankItem"}),(null===d||void 0===d?void 0:d.excerpt)&&s.a.createElement("a",{href:null===d||void 0===d?void 0:d.url,target:"_blank",onClick:function(e){return f(e)}}," ",d.excerpt)))},J=s.a.memo(H),V=function(e){var a=e.data,t=e.readAll,n=Object(o["useState"])(null===a||void 0===a?void 0:a.viewed),r=Object(l["a"])(n,2),c=r[0],i=r[1];return s.a.createElement(I["a"],{as:"li",action:!0,className:"".concat(c||t?"":"bg-warning"," py-2 border-0")},(null===a||void 0===a?void 0:a.sentence)&&s.a.createElement("span",{dangerouslySetInnerHTML:{__html:a.sentence}}),(null===a||void 0===a?void 0:a.excerpt)&&s.a.createElement("a",{href:null===a||void 0===a?void 0:a.url,target:"_blank",onClick:function(){a.viewed||i(1)}}," ",a.excerpt))},Y=s.a.memo(V),R=[{name:"general",icon:"far fa-bullhorn"},{name:"ranked",icon:"far fa-trophy-star"},{name:"followed",icon:"far fa-user-plus"}],Q=function(e){var a,t,n,r,c=e.visible,i=Object(o["useState"])("general"),m=Object(l["a"])(i,2),d=m[0],u=m[1],v=Object(o["useState"])(),f=Object(l["a"])(v,2),g=f[0],p=f[1],h=Object(o["useState"])(!0),b=Object(l["a"])(h,2),E=b[0],y=b[1],x=Object(o["useState"])(!0),_=Object(l["a"])(x,2),S=_[0],I=_[1],D=Object(o["useState"])(""),T=Object(l["a"])(D,2),A=T[0],F=T[1],P=Object(o["useState"])({followed:0,general:0,ranked:0}),H=Object(l["a"])(P,2),V=H[0],Q=H[1],Z=Object(o["useState"])(!1),K=Object(l["a"])(Z,2),X=K[0],G=K[1];Object(o["useEffect"])((function(){c?(le(),ae("","")):(u("general"),I(!0),y(!0),F(""),p({}))}),[c]);var $=Object(O["debounce"])((function(){S&&ae(d,A)}),400),ee=function(e){var a,t;u(e.name),F(null===g||void 0===g||null===(a=g[e.name])||void 0===a?void 0:a.offset),(null===g||void 0===g||null===(t=g[e.name])||void 0===t?void 0:t.data.length)>9?I(!0):I(!1),ne(e.name)},ae=function(e,a){Object(U["qc"])(e,a).then((function(e){var t,n;if(e)if(a){var l={data:[].concat(Object(w["a"])((null===g||void 0===g?void 0:g[d].data)||{}),Object(w["a"])(e[d].data)),offset:null===e||void 0===e?void 0:e[d].offset,size:20};p(Object(M["a"])(Object(M["a"])({},g),{},Object(z["a"])({},d,l)))}else p(e);F(null===e||void 0===e||null===(t=e[d])||void 0===t?void 0:t.offset),I((null===e||void 0===e||null===(n=e[d].data)||void 0===n?void 0:n.length)>9),y(!1)}))["catch"]((function(){I(!1)}))},te=function(e){var a,t,n,l,r,c;switch(e){case"general":return null===g||void 0===g||null===(a=g[d])||void 0===a||null===(t=a.data)||void 0===t?void 0:t.map((function(e,a){return s.a.createElement(Y,{data:e,key:"".concat(e.sentence).concat(a),readAll:X})}));case"ranked":return null===g||void 0===g||null===(n=g[d])||void 0===n||null===(l=n.data)||void 0===l?void 0:l.map((function(e,a){return s.a.createElement(J,{data:e,key:"".concat(e.sentence).concat(a),readAll:X})}));case"followed":return null===g||void 0===g||null===(r=g[d])||void 0===r||null===(c=r.data)||void 0===c?void 0:c.map((function(e,a){var t;return s.a.createElement(W,{data:e,key:"".concat(null===e||void 0===e||null===(t=e.trigger_user)||void 0===t?void 0:t[0].id).concat(a),readAll:X})}));default:return null}},ne=function(e){"all"!==e&&V[e]<=0||Object(U["vd"])(e).then((function(a){a&&("all"===e&&G(!0),Q(Object(M["a"])(Object(M["a"])({},V),{},Object(z["a"])({},e,0))))}))},le=function(){Object(U["Ic"])().then((function(e){e.general>0?(u("general"),Q(Object(M["a"])(Object(M["a"])({},e),{},{general:0}))):e.ranked>0?(u("ranked"),Q(Object(M["a"])(Object(M["a"])({},e),{},{ranked:0}))):e.followed>0?(u("followed"),Q(Object(M["a"])(Object(M["a"])({},e),{},{followed:0}))):Q(Object(M["a"])(Object(M["a"])({},e),{},{general:0}))}))};Object(o["useEffect"])((function(){var e,a;null!==g&&void 0!==g&&null!==(e=g["rank"])&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.length.length&&q(".rankItem a").on("click",(function(e){return re(e)}))}),[null===g||void 0===g||null===(a=g["rank"])||void 0===a||null===(t=a.data)||void 0===t?void 0:t.length]);var re=function(e){var a=q(e.currentTarget).attr("href");null!==a&&void 0!==a&&a.includes("_ea")&&q(e.currentTarget).parents(".rankItemParent").removeClass("bg-warning")};return s.a.createElement(s.a.Fragment,null,s.a.createElement(N["a"],{className:"border-0 letterBox header-box",style:{minWidth:"22rem"}},s.a.createElement(N["a"].Header,{className:"bg-transparent text-center border-0"},s.a.createElement(B["a"],{className:"w-100 msg-btn-group"},R.map((function(e){return s.a.createElement(L["a"],{variant:"outline-secondary",size:"sm",className:d===e.name?"active":"",key:e.name,onClick:function(){return ee(e)}},s.a.createElement("i",{className:"fa-w-18 ".concat(e.icon)}),!X&&V[e.name]>0&&s.a.createElement("div",{className:"has-unread-dot"}))})))),s.a.createElement(N["a"].Body,{className:"letter p-0 font-size-14"},s.a.createElement(k["a"],{style:{height:"306px",overflowY:"auto"},as:"ul"},s.a.createElement(j.a,{className:"content-list-wrap",pageStart:0,initialLoad:!1,loadMore:$,hasMore:S,useWindow:!1},(null===g||void 0===g||null===(n=g[d])||void 0===n||null===(r=n.data)||void 0===r?void 0:r.length)>0&&te(d),S&&!E?s.a.createElement("div",{className:"text-center py-3"},"\u52a0\u8f7d\u4e2d..."):""),E&&s.a.createElement(C,null))),s.a.createElement(N["a"].Footer,{className:"bg-transparent d-flex justify-content-between"},s.a.createElement("a",{href:"###",className:"text-secondary font-size-14 all-view",onClick:function(e){e.preventDefault(),ne("all")}},s.a.createElement("i",{className:"me-1 far fa-check-double"}),"\u5168\u90e8\u6807\u8bb0\u4e3a\u5df2\u8bfb"),s.a.createElement("a",{href:"/user/notifications",className:"text-secondary font-size-14"},"\u67e5\u770b\u5168\u90e8"))))},Z=Q,K=t("TSYQ"),X=t.n(K),G=t("tSvB"),$=X()(_.a["medal-circle"],"me-1"),ee=function(e){var a,t,n,r,c,i,m,d,u,v,f,g,p=Object(o["useState"])(!1),h=Object(l["a"])(p,2),E=h[0],w=h[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("h5",{className:"dropdown-header mw-316"},s.a.createElement("span",{className:"me-2",style:{color:"#BF7158"}},null===(a=e.sessionUser)||void 0===a||null===(t=a.user)||void 0===t?void 0:t.rank),s.a.createElement("span",{className:"d-inline-block me-1"},s.a.createElement("i",{className:"".concat($," fas fa-circle"),style:{color:"#FFDA23"}}),null===(n=e.userStat.summary_badges)||void 0===n?void 0:n.gold),s.a.createElement("span",{className:"d-inline-block me-1"},s.a.createElement("i",{className:"".concat($," fas fa-circle"),style:{color:"#C5C5C5"}}),null===(r=e.userStat.summary_badges)||void 0===r?void 0:r.silver),s.a.createElement("span",{className:"d-inline-block me-1"},s.a.createElement("i",{className:"".concat($," fas fa-circle"),style:{color:"#CD9A62"}}),null===(c=e.userStat.summary_badges)||void 0===c?void 0:c.bronze)),s.a.createElement("div",{className:"dropdown-divider"}),s.a.createElement("div",{className:"row no-gutters"},s.a.createElement("div",{className:"col-6"},s.a.createElement("a",{className:"dropdown-item",href:(null===(i=e.sessionUser)||void 0===i?void 0:i.user.url)+"/articles"},"\u6211\u7684\u6587\u7ae0"),s.a.createElement("a",{className:"dropdown-item",href:"/user/note"},"\u6211\u7684\u7b14\u8bb0"),s.a.createElement("a",{className:"dropdown-item",href:(null===(m=e.sessionUser)||void 0===m?void 0:m.user.url)+"/bookmarks"},"\u6211\u7684\u6536\u85cf"),s.a.createElement("a",{className:"dropdown-item d-flex justify-content-between align-items-center",href:"/user/invited"},"\u53d7\u9080\u56de\u7b54",e.userStat.invites>0&&s.a.createElement("span",{className:"badge rounded-pill bg-secondary"},e.userStat.invites<99?e.userStat.invites:"..."))),s.a.createElement("div",{className:"col-6"},s.a.createElement("a",{className:"dropdown-item",href:e.sessionUser.user.url},"\u6211\u7684\u4e3b\u9875"),s.a.createElement("a",{className:"dropdown-item",href:"/user/finance"},"\u6211\u7684\u8d44\u4ea7"),s.a.createElement("a",{className:"dropdown-item",href:"/user/settings"},"\u4e2a\u4eba\u8bbe\u7f6e"),s.a.createElement("a",{className:"dropdown-item",href:"###",onClick:function(a){a.preventDefault(),q("#userDropDown").removeClass("show"),e.logout()}},"\u9000\u51fa\u767b\u5f55"),((null===(d=e.sessionUser)||void 0===d||null===(u=d.roles)||void 0===u?void 0:u.is_admin)||(null===(v=e.sessionUser)||void 0===v||null===(f=v.roles)||void 0===f?void 0:f.is_editor))&&s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{className:"dropdown-item",href:"###",onClick:function(e){e.preventDefault(),q("#userDropDown").removeClass("show"),b.a.set("sf_beta",1),window.location.reload()}},"\u5207\u6362Beta\u7248"),s.a.createElement("a",{className:"dropdown-item",href:"###",onClick:function(e){e.preventDefault(),q("#userDropDown").removeClass("show"),b.a.set("sf_beta",0),window.location.reload()}},"\u9000\u51faBeta\u7248")))),s.a.createElement("div",{className:"dropdown-divider"}),s.a.createElement("div",{className:"px-4 py-1 font-size-14"},s.a.createElement("a",{href:"/help/community/complain",className:"text-secondary",target:"_blank"},"\u7528\u6237\u7533\u8bc9"),s.a.createElement("span",{className:"split-dot"}),s.a.createElement("a",{href:"/0x",className:"text-secondary",target:"_blank"},"\u5efa\u8bae\u53cd\u9988"),s.a.createElement("span",{className:"split-dot"}),s.a.createElement("a",{href:"/user/invitation",className:"text-secondary",target:"_blank"},"\u9080\u8bf7\u6ce8\u518c"),(null===e||void 0===e||null===(g=e.sessionUser)||void 0===g?void 0:g.is_change)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"split-dot"}),s.a.createElement("a",{href:"#!",className:"text-secondary",onClick:function(a){a.stopPropagation(),e.outChange()}},"\u9000\u51fa\u5207\u6362"))),s.a.createElement(G["b"],{isShow:E,setModalStatus:w}))},ae=ee,te=s.a.forwardRef((function(e,a){var t,n,l=e.sessionUser,r=e.children,c=e.onClick;return s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{className:"nav-link p-0",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",href:null===(t=l.user)||void 0===t?void 0:t.url,ref:a,onClick:function(e){e.preventDefault(),c(e)}},s.a.createElement("img",{className:"rounded-circle d-lg-inline-block",width:"32",height:"32",src:(null===(n=l.user)||void 0===n?void 0:n.avatar_url)||"https://image-static.segmentfault.com/317/931/3179314346-5f61e47221e07",alt:"\u5934\u50cf"}),s.a.createElement("span",{className:"d-lg-none"},r)))}));te.displayName="Profile_Toggle";var ne=Object(p["b"])((function(e){var a=e.global;return{sessionUser:a.sessionUser}}),null,null,{forwardRef:!0})(te),le=t("95Qr"),re=function(e){var a,r=e.sessionUser,p=e.menu,h=e.title,w=e.rightComponent,N=e.dispatch,k=e.letterNum,y=void 0===k?0:k,j=e.noticeNum,O=void 0===j?0:j,x=e.userStat,S=e.children,C=e.isBaiduOxApp,I=void 0!==C&&C,D=Object(g["g"])(),T=Object(g["h"])(),A=T.query,z=Object(o["useState"])((function(){return p||[{name:"\u95ee\u7b54",url:"/questions"},{name:"\u4e13\u680f",url:"/blogs"},{name:"\u8bfe\u7a0b",url:"https://ke.segmentfault.com"},{name:"\u62db\u8058",url:"/jobs",icon:"fas fa-fire",className:"d-flex align-items-center"},{name:"\u6d3b\u52a8",url:"/events"}]})),M=Object(l["a"])(z,1),B=M[0],L=Object(o["useState"])(!1),q=Object(l["a"])(L,2),P=q[0],W=q[1],H=Object(o["useState"])(!1),J=Object(l["a"])(H,2),V=J[0],Y=J[1],R=Object(o["useState"])("/ask"),Q=Object(l["a"])(R,2),K=Q[0],X=Q[1],G=function(){var e=Object(n["a"])(c.a.mark((function e(){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(U["bb"])();case 2:b.a.remove("sf_remember"),a=E["g"].find((function(e){return window.location.pathname.includes(e.pathname)})),a?window.location.href=a.redirect:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o["useEffect"])((function(){var e=E["n"].find((function(e){return D.location.pathname.includes(e)}));X(e?"/".concat(e,"/ask"):"/ask")}),[D.location.pathname]);var $=function(){localStorage.setItem("referer",decodeURI(window.location.href)),N({type:"global/saveShowLoginState",payload:{isShowLogin:!0}})},ee=function(){var e=Object(n["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(U["D"])();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(i["a"],{id:"sf-header",expand:"lg",className:"bg-white shadow-sm sticky-top"},s.a.createElement(m["a"],{className:"position-relative"},!h&&s.a.createElement(i["a"].Toggle,{className:_.a["self-nav-toogle"],as:"div","aria-controls":"basic-navbar-nav"}),s.a.createElement("div",{className:"left-wrap d-flex justify-content-between align-items-center nav-grow"},s.a.createElement(i["a"].Brand,{className:"".concat(_.a["sf-header"]," me-3 me-md-0 me-lg-3"),href:"/"},s.a.createElement("img",{src:t("XHHP"),width:"139",height:"26",className:"lg-show",alt:"segmentfault"}),s.a.createElement("img",{src:t("Z6Z6"),width:"30",height:"30",className:"lg-none",alt:"segmentfault"})),s.a.createElement("div",{className:"d-flex lg-none align-items-center"},s.a.createElement("a",{href:"/search","aria-label":"\u641c\u7d22",className:"d-inline-block text-center text-secondary position-relative",style:{fontSize:"20px",width:"44px"}},s.a.createElement("i",{className:"fa-fw far fa-magnifying-glass"})),r&&s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{href:"/user/notifications","aria-label":"\u901a\u77e5",className:"d-inline-block text-center text-secondary position-relative",style:{fontSize:"20px",width:"44px"}},s.a.createElement("i",{className:"fa-fw far fa-bell"}),O>0&&s.a.createElement(d["a"],{bg:"danger",pill:!0,className:"has-unread-count has-unread-count2"},O>99?"...":O)),s.a.createElement("a",{href:"/user/messages","aria-label":"\u79c1\u4fe1",className:"d-inline-block text-center text-secondary position-relative",style:{fontSize:"20px",width:"44px"}},s.a.createElement("i",{className:"fa-fw far fa-envelope"}),y>0&&s.a.createElement(d["a"],{bg:"danger",pill:!0,className:"has-unread-count has-unread-count2"},y>99?"...":y)),s.a.createElement(u["a"],{className:"position-relative text-end",align:"end",style:{width:"44px"}},s.a.createElement(u["a"].Toggle,{as:ne,id:"header-mine"}),s.a.createElement(u["a"].Menu,{align:"end",id:"userDropDown"},s.a.createElement(ae,{sessionUser:r,logout:G,outChange:ee,userStat:x})))),!r&&!h&&s.a.createElement("a",{className:"btn btn-primary d-lg-none ms-2",href:"/user/login",onClick:function(){localStorage.setItem("referer",decodeURI(window.location.href))}},"\u6ce8\u518c\u767b\u5f55")),S),h?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"h5 mb-0 text-secondary position-absolute sflex-center w-100 ".concat(_.a["title-wrap"]," d-none d-md-flex")},h),w()):s.a.createElement(i["a"].Collapse,{id:"basic-navbar-nav",className:"justify-content-between"},s.a.createElement(v["a"],{className:"fw-bold"},B.map((function(e,a){return"\u8bfe\u7a0b"===e.name?I?null:s.a.createElement("a",{key:e.url,href:e.url,target:"_blank",className:"nav-link lg-show"},e.name,e.icon&&s.a.createElement("i",{className:"ms-1 text-danger ".concat(e.icon),style:{width:"0.88rem",verticalAlign:"text-bottom"}})):"\u4e13\u680f"===e.name?s.a.createElement(v["a"].Link,{href:e.url,key:a,active:e.url===D.location.pathname||D.location.pathname.includes("/channel")||D.location.pathname.includes("/news")||D.location.pathname.includes("/blogs")},e.name,e.icon&&s.a.createElement("i",{className:"ms-1 text-danger ".concat(e.icon),style:{width:"0.88rem",verticalAlign:"text-bottom"}})):"\u6d3b\u52a8"===e.name&&I?null:s.a.createElement(v["a"].Link,{href:e.url,key:a,active:e.url===D.location.pathname,className:(null===e||void 0===e?void 0:e.className)||""},e.name,e.icon&&s.a.createElement("i",{className:"ms-1 text-danger ".concat(e.icon),style:{width:"0.88rem",verticalAlign:"text-bottom"}}))})),s.a.createElement(f["a"],{title:"\u53d1\u73b0",id:"basic-nav-dropdown",className:"lg-show  hover-down ".concat(I?"d-none":"")},s.a.createElement(f["a"].Item,{href:"/dianping"},"\u70b9\u8bc4"),s.a.createElement(f["a"].Item,{href:"/groups"},"\u5708\u5b50"),s.a.createElement(f["a"].Item,{href:"/tags"},"\u6807\u7b7e"),s.a.createElement(f["a"].Item,{href:"/users"},"\u6392\u884c\u699c"),s.a.createElement(f["a"].Item,{href:"/notes"},"\u7b14\u8bb0"),s.a.createElement(f["a"].Divider,null),s.a.createElement(f["a"].Item,{href:"https://business.segmentfault.com/ads?utm_source=sf-header",target:"_blank"},"\u5e7f\u544a\u6295\u653e",s.a.createElement("i",{className:"ms-2 text-warning fas fa-square-up-right"})))),s.a.createElement("div",{className:"d-none d-xl-block px-3 ".concat(_.a["header-search"])},s.a.createElement(le["a"],{defaultValue:A.q})),r?s.a.createElement("ul",{className:"navbar-nav navbar-user align-items-lg-center lg-show flex"},s.a.createElement(u["a"],{className:"position-relative"},s.a.createElement(u["a"].Toggle,{variant:"primary",className:"me-2",id:"header-write"},s.a.createElement("span",{className:"me-1"},"\u64b0\u5199")),s.a.createElement(u["a"].Menu,null,s.a.createElement(u["a"].Item,{href:K},"\u63d0\u95ee\u9898"),s.a.createElement(u["a"].Item,{href:"/write"},"\u5199\u6587\u7ae0"),s.a.createElement(u["a"].Item,{href:"/record"},"\u8bb0\u7b14\u8bb0"),s.a.createElement(u["a"].Item,{href:"/jobs"},"\u53d1\u62db\u8058"),s.a.createElement(u["a"].Item,{href:"/video/add"},"\u53d1\u89c6\u9891"),s.a.createElement(u["a"].Item,{href:"/live/add"},"\u5f00\u76f4\u64ad"),s.a.createElement(u["a"].Divider,null),s.a.createElement(u["a"].Item,{href:"/user/draft",className:"d-inline-flex justify-content-between align-items-center"},s.a.createElement("span",null,"\u8349\u7a3f"),(null===x||void 0===x?void 0:x.drafts)>0&&s.a.createElement(d["a"],{bg:"secondary",className:"rounded-pill px-2"},null===x||void 0===x?void 0:x.drafts)))),s.a.createElement(u["a"],{className:"nav-item position-relative d-none d-lg-block",show:V,onToggle:function(e){Y(e)}},s.a.createElement(u["a"].Toggle,{as:"a",className:"dropdown-no-angle nav-link",style:{cursor:"pointer"},href:"/user/notifications",onClick:function(e){e.preventDefault(),Y(!V)},id:"header-ntice"},s.a.createElement("i",{className:"me-1 fa-fw far fa-bell"}),s.a.createElement("span",{className:"d-lg-none"},"\u901a\u77e5"),O>0&&s.a.createElement(d["a"],{bg:"danger",pill:!0,className:"has-unread-count"},O>99?"...":O)),s.a.createElement(u["a"].Menu,{align:"end",className:"dropdown-menu-right p-0",show:V},s.a.createElement(Z,{visible:V}))),s.a.createElement(v["a"].Item,{className:"d-lg-none"},s.a.createElement("a",{href:"/user/notifications",className:"nav-link","aria-label":"\u901a\u77e5"},s.a.createElement("i",{className:"me-1 fa-fw far fa-bell"}),s.a.createElement("span",{className:"d-lg-none"},"\u901a\u77e5"),O>0&&s.a.createElement(d["a"],{bg:"danger",pill:!0,className:"has-unread-count"},O>99?"...":O))),s.a.createElement(u["a"],{className:"nav-item position-relative d-none d-lg-block",id:"letter",show:P,onToggle:function(e){W(e)}},s.a.createElement(u["a"].Toggle,{as:"a",className:"dropdown-no-angle nav-link",style:{cursor:"pointer"},href:"/user/messages",onClick:function(e){e.preventDefault(),W(!P)},id:"header-letter"},s.a.createElement("i",{className:"me-1 fa-fw far fa-envelope"}),s.a.createElement("span",{className:"d-lg-none"},"\u79c1\u4fe1"),y>0&&s.a.createElement(d["a"],{bg:"danger",pill:!0,className:"has-unread-count"},y>99?"...":y)),s.a.createElement(u["a"].Menu,{align:"end",className:"dropdown-menu-right p-0",show:P},s.a.createElement(F,{visible:P}))),s.a.createElement(v["a"].Item,{className:"d-lg-none"},s.a.createElement("a",{href:"/user/messages",className:"nav-link","aria-label":"\u79c1\u4fe1"},s.a.createElement("i",{className:"me-1 fa-fw far fa-envelope"}),s.a.createElement("span",{className:"d-lg-none"},"\u79c1\u4fe1"),y>0&&s.a.createElement(d["a"],{bg:"danger",pill:!0,className:"has-unread-count"},y>99?"...":y))),(null===r||void 0===r||null===(a=r.user)||void 0===a?void 0:a.rank)>=500&&s.a.createElement(v["a"].Item,null,s.a.createElement("a",{href:"/review",className:"nav-link position-relative","aria-label":"\u4f17\u5ba1\u4e2d\u5fc3"},s.a.createElement("i",{className:"me-1 fa-fw far fa-list-check"}),s.a.createElement("span",{id:"reviewCount",className:"d-lg-none"},"\u4f17\u5ba1\u4e2d\u5fc3"),(null===x||void 0===x?void 0:x.notify_review)&&s.a.createElement("span",{className:_.a["review-dot"]}))),s.a.createElement(u["a"],{className:"position-relative ms-2",align:"end"},s.a.createElement(u["a"].Toggle,{as:ne,id:"header-mine"},"\u6211\u7684"),s.a.createElement(u["a"].Menu,{align:"end",id:"userDropDown"},s.a.createElement(ae,{sessionUser:r,logout:G,outChange:ee,userStat:x})))):s.a.createElement(i["a"],{className:"p-0"},s.a.createElement(v["a"].Item,{className:"d-none d-lg-flex me-2 me-md-0"},s.a.createElement("a",{href:"/user/login",className:"btn btn-primary",onClick:function(e){e.preventDefault(),$()}},"\u6ce8\u518c\u767b\u5f55"))))))};a["a"]=Object(p["b"])((function(e){var a=e.global;return{sessionUser:a.sessionUser,letterNum:a.letterNum,noticeNum:a.noticeNum,userStat:a.userStat,isBaiduOxApp:a.isBaiduOxApp}}))(re)}}]);